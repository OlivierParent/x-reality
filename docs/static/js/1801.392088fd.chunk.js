"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[1801],{1777:(e,r,n)=>{n.d(r,{$:()=>l});var o=n(1707),t=n(7313);const a=n.p+"static/media/bensound-evolution.4375aef0bb0aa53f542e.mp3";var s=n(6417);const i=new Audio(a);i.volume=.02;const l=e=>{const[r,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{r?i.play():i.pause()}),[r]),(0,s.jsx)("group",{...e,children:(0,s.jsxs)(o.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),n((e=>!e))},position:[0,.5,0],children:["Global Audio, ",r?"playing":"music",": https://www.bensound.com"]})})}},1898:(e,r,n)=>{n.d(r,{$:()=>l});var o=n(1707),t=n(6866),a=n(7313);const s=n.p+"static/media/bensound-badass.8ef4f40c2805fd404725.mp3";var i=n(6417);const l=e=>{const r=(0,a.useRef)(null),[n,l]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{r.current.isPlaying||r.current.play()}),[]),(0,a.useEffect)((()=>{n?r.current.play():r.current.stop()}),[n]),(0,i.jsxs)("group",{...e,children:[(0,i.jsxs)(o.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),l((e=>!e))},position:[0,.5,0],children:["Positional Audio, ",n?"playing":"music",": https://www.bensound.com"]}),(0,i.jsx)(t.V,{autoplay:!0,distance:1,loop:!0,ref:r,url:s})]})}},3658:(e,r,n)=>{n.d(r,{MU:()=>u,En:()=>p,tK:()=>c});var o=n(7313);let t=function(e){return e.CURSOR_ACTIVE="CURSOR_ACTIVE",e.CURSOR_INACTIVE="CURSOR_INACTIVE",e}({});const a="CursorOverlay_cursor__OSCiH";var s=n(6417);const i=new Event(t.CURSOR_ACTIVE),l=new Event(t.CURSOR_INACTIVE),p=e=>{e.stopPropagation(),window.dispatchEvent(i)},c=e=>{e.stopPropagation(),window.dispatchEvent(l)},u=()=>{const[e,r]=(0,o.useState)(!1);(0,o.useMemo)((()=>{window.addEventListener(t.CURSOR_ACTIVE,(()=>{r(!0)})),window.addEventListener(t.CURSOR_INACTIVE,(()=>{r(!1)}))}),[]);const n=e?"white":"transparent";return(0,s.jsx)("div",{className:a,style:{backgroundColor:n}})}},9363:(e,r,n)=>{let o;n.d(r,{n:()=>o}),function(e){let r=function(e){return e.playerJump="playerJump",e.playerMoveBackward="playerMoveBackward",e.playerMoveForward="playerMoveForward",e.playerMoveLeft="playerMoveLeft",e.playerMoveRight="playerMoveRight",e.playerRun="playerRun",e.pinballFlipperBoth="pinballFlipperBoth",e.pinballFlipperLeft="pinballFlipperLeft",e.pinballFlipperRight="pinballFlipperRight",e.pinballShoot="pinballShoot",e}({});const n="KeyA",o="KeyD",t="ArrowDown",a="KeyE",s="Enter",i="KeyF",l="KeyJ",p="ArrowLeft",c="KeyQ",u="ArrowRight",d="KeyS",y="Shift",E="Space",h="ArrowUp",I="KeyW",R="KeyZ",v=[{name:r.playerMoveBackward,keys:[t,o]},{name:r.playerMoveForward,keys:[h,a]},{name:r.playerMoveLeft,keys:[p,d]},{name:r.playerMoveRight,keys:[u,i]}],O=[{name:r.playerJump,keys:[E]},{name:r.playerRun,keys:[y]}],S=[{name:r.playerMoveBackward,keys:[t,d]},{name:r.playerMoveForward,keys:[h,I]},{name:r.playerMoveLeft,keys:[p,n]},{name:r.playerMoveRight,keys:[u,o]}],f=[{name:r.playerMoveBackward,keys:[t,d]},{name:r.playerMoveForward,keys:[h,R]},{name:r.playerMoveLeft,keys:[p,c]},{name:r.playerMoveRight,keys:[u,o]}];e.CONFIG_FIRST_PERSON_AZERTY=[...f,...O],e.CONFIG_FIRST_PERSON_UNIVERSAL=[...v,...O],e.CONFIG_FIRST_PERSON_QWERTY=[...S,...O],e.CONFIG_PINBALL_MACHINE=[{name:r.pinballFlipperBoth,keys:[E]},{name:r.pinballFlipperLeft,keys:[i]},{name:r.pinballFlipperRight,keys:[l]},{name:r.pinballShoot,keys:[s]}]}(o||(o={}))},4950:(e,r,n)=>{n.d(r,{o:()=>o});const o={BOX:{COUNT:10,MASS:0,SIZE:1},PLANE:{SIZE:10}}},5278:(e,r,n)=>{n.d(r,{r:()=>o});const o={DIRECTION:{BACKWARD:1,DOWN:-1,FORWARD:-1,LEFT:-1,NONE:0,RIGHT:1,UP:1},HEIGHT:1.75,MASS:75,POSITION:new(n(5825).Vector3)(0,2,2),SIZE:.5,VELOCITY:{DEFAULT:1,FORWARD:2,LATERAL:1,LONGITUDINAL:1,NONE:0,NORMAL:.5,RUN:3}}},6653:(e,r,n)=>{n.d(r,{n:()=>C});var o=n(1777),t=n(1898),a=n(3658),s=n(2952),i=n(3082),l=n(5825),p=n(6417);const c=e=>{const r=[100,100],n=new l.Euler(l.MathUtils.degToRad(-90),0,0);return(0,p.jsx)("group",{name:"Floor",...e,children:(0,p.jsx)(i.ib,{children:(0,p.jsx)(s.JO,{args:r,rotation:n,children:(0,p.jsx)("meshBasicMaterial",{color:6710886,side:l.DoubleSide})})})})};var u=n(4950);const d=new Array(u.o.BOX.COUNT).fill(null).map((()=>{const e=Math.floor(Math.random()*u.o.PLANE.SIZE-u.o.PLANE.SIZE/2),r=u.o.BOX.SIZE/2,n=Math.floor(Math.random()*u.o.PLANE.SIZE-u.o.PLANE.SIZE/2);return new l.Vector3(e,r,n)})),y=new Array(u.o.BOX.COUNT).fill(null).map(((e,r)=>({position:d[r]}))),E=e=>{let{position:r}=e;return(0,p.jsx)(i.ib,{colliders:"cuboid",type:"fixed",children:(0,p.jsx)(s.xu,{args:[u.o.BOX.SIZE,u.o.BOX.SIZE,u.o.BOX.SIZE],onPointerEnter:a.En,onPointerLeave:a.tK,onPointerOut:a.tK,onPointerOver:a.En,position:r,children:(0,p.jsx)("meshBasicMaterial",{color:16777215*Math.random(),opacity:.75,transparent:!0})})})},h=e=>(0,p.jsx)("group",{name:"Obstacles",...e,children:y.map(((e,r)=>{let{position:n}=e;return(0,p.jsx)(E,{position:n},r)}))});var I=n(9782),R=n(2738),v=n(4063),O=n(6351),S=n(7313),f=n(5278);const m=new l.Vector3,g=m.clone(),x=e=>{const r=(0,I.Z)((e=>e.playerJump)),n=(0,I.Z)((e=>e.playerMoveBackward)),o=(0,I.Z)((e=>e.playerMoveForward)),t=(0,I.Z)((e=>e.playerMoveLeft)),a=(0,I.Z)((e=>e.playerMoveRight)),l=(0,I.Z)((e=>e.playerRun)),c=(0,S.useRef)(null),u=(0,S.useRef)(null),d=(0,S.useRef)(null),[y,E]=(0,S.useState)(!0),[h,x]=(0,S.useState)(!1);return(0,S.useEffect)((()=>{h&&(setTimeout((()=>E(!0)),1e3),setTimeout((()=>x(!1)),230))}),[h]),(0,O.C)((()=>{const e=u.current.getObject(),s=c.current,i=d.current,p=s.linvel(),I=a?f.r.DIRECTION.RIGHT:t?f.r.DIRECTION.LEFT:f.r.DIRECTION.NONE,R=f.r.VELOCITY.LATERAL,v=o?f.r.DIRECTION.FORWARD:n?f.r.DIRECTION.BACKWARD:f.r.DIRECTION.NONE,O=o?f.r.VELOCITY.FORWARD:n?f.r.VELOCITY.DEFAULT:f.r.VELOCITY.NONE;y&&!h&&r&&(x(!0),E(!1));const S=r?f.r.DIRECTION.UP:f.r.DIRECTION.NONE,N=h&&r?f.r.VELOCITY.NORMAL:f.r.VELOCITY.NONE,C=l?f.r.VELOCITY.RUN:f.r.VELOCITY.DEFAULT;g.set(I*R*C,0,v*O*C),g.applyQuaternion(e.quaternion),g.y=p.y+S*N,n||o||t||a||s.setAngvel(m),s.setLinvel(g);const w=s.translation();e.position.copy(w),e.position.y+=f.r.HEIGHT-f.r.SIZE,i.position.copy(w),i.position.y=.001})),(0,p.jsxs)("group",{name:"Player",...e,children:[(0,p.jsx)(R.q,{ref:u}),(0,p.jsx)(i.ib,{canSleep:!1,colliders:"ball",mass:f.r.MASS,position:f.r.POSITION,ref:c,type:"dynamic",children:(0,p.jsx)(s.aL,{args:[f.r.SIZE,8,8],children:(0,p.jsx)("meshBasicMaterial",{color:65280,visible:!1,wireframe:!0})})}),(0,p.jsx)(v.j,{color:"black",colorStop:0,fog:!1,opacity:.5,ref:d})]})},N=e=>{const r=l.MathUtils.degToRad(-55),n=new l.Euler(r,0,0);return(0,p.jsx)("group",{name:"Stairs",...e,children:(0,p.jsx)(i.ib,{type:"fixed",children:(0,p.jsx)(s.xu,{args:[1,10,.2],rotation:n,children:(0,p.jsx)("meshBasicMaterial",{color:10066329,opacity:.25,transparent:!0})})})})},C=e=>(0,p.jsxs)("group",{name:"World",...e,children:[(0,p.jsx)(c,{}),(0,p.jsx)(h,{}),(0,p.jsx)(x,{}),(0,p.jsx)(o.$,{onPointerEnter:a.En,onPointerLeave:a.tK,position:[0,0,-5]}),(0,p.jsx)(t.$,{onPointerEnter:a.En,onPointerLeave:a.tK}),(0,p.jsx)(N,{})]})},3280:(e,r,n)=>{n.d(r,{p:()=>l});var o=n(4704),t=n(5397),a=n(9817);let s;var i;function l(){const{gravity:e,paused:r,showDebug:n}=(0,o.M4)(t.O.SCHEMA.PHYSICS,{gravity:s.gravity(),paused:s.paused(),showDebug:s.showDebug(!0)},a.F.folder(t.O.ORDER.PHYSICS));return{gravity:e,paused:r,showDebug:n}}(i=s||(s={})).gravity=function(){return{label:"Gravity",hint:"Default = 9.81",value:{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-9.80665,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}}},i.paused=function(){return{label:"Paused",hint:"Pause physics simulation.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},i.showDebug=function(){return{label:"Debug",hint:"Show debug geometry.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}},2968:(e,r,n)=>{n.r(r),n.d(r,{default:()=>f});var o=n(6653),t=n(9782),a=n(7066),s=n(5819),i=n(3082),l=n(2046),p=n(2082),c=n(8385),u=n(4704),d=n(7313),y=n(1724),E=n(7862),h=n(3658),I=n(9363),R=n(4662),v=n(3280),O=n(6417);const S=e=>{let{children:r}=e;const n=(0,R.p)(),o=(0,v.p)();return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(l._A,{}),(0,O.jsx)(s.Xz,{camera:void 0,flat:n.flat,frameloop:n.frameloop,linear:n.linear,orthographic:!1,shadows:n.shadows,children:(0,O.jsxs)(l.XR,{children:[(0,O.jsx)(p.z,{}),(0,O.jsx)(c.D,{}),(0,O.jsxs)(d.Suspense,{children:[(0,O.jsx)(y.Z,{}),(0,O.jsx)(E.u,{}),(0,O.jsx)(t.c,{map:I.n.CONFIG_FIRST_PERSON_UNIVERSAL,children:(0,O.jsx)(i.wI,{colliders:void 0,debug:o.showDebug,gravity:[o.gravity.x,o.gravity.y,o.gravity.z],paused:o.paused,timeStep:"vary",updatePriority:void 0,children:r})})]})]})}),(0,O.jsx)(h.MU,{}),(0,O.jsx)(u.Zf,{collapsed:!1,fill:!1,flat:!1,hidden:!1,oneLineLabels:!0,titleBar:!0}),(0,O.jsx)(a.a,{})]})},f=e=>(0,O.jsx)(S,{children:(0,O.jsx)(o.n,{...e})})}}]);