"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[1801],{1777:(e,r,n)=>{n.d(r,{$:()=>l});var o=n(1707),t=n(7313);const a=n.p+"static/media/bensound-evolution.4375aef0bb0aa53f542e.mp3";var s=n(6417);const i=new Audio(a);i.volume=.02;const l=e=>{const[r,n]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{r?i.play():i.pause()}),[r]),(0,s.jsx)("group",{...e,children:(0,s.jsxs)(o.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),n((e=>!e))},position:[0,.5,0],children:["Global Audio, ",r?"playing":"music",": https://www.bensound.com"]})})}},1898:(e,r,n)=>{n.d(r,{$:()=>l});var o=n(1707),t=n(6866),a=n(7313);const s=n.p+"static/media/bensound-badass.8ef4f40c2805fd404725.mp3";var i=n(6417);const l=e=>{const r=(0,a.useRef)(null),[n,l]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{r.current.isPlaying||r.current.play()}),[]),(0,a.useEffect)((()=>{n?r.current.play():r.current.stop()}),[n]),(0,i.jsxs)("group",{...e,children:[(0,i.jsxs)(o.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),l((e=>!e))},position:[0,.5,0],children:["Positional Audio, ",n?"playing":"music",": https://www.bensound.com"]}),(0,i.jsx)(t.V,{autoplay:!0,distance:1,loop:!0,ref:r,url:s})]})}},3658:(e,r,n)=>{n.d(r,{MU:()=>u,En:()=>p,tK:()=>c});var o=n(7313);let t=function(e){return e.CURSOR_ACTIVE="CURSOR_ACTIVE",e.CURSOR_INACTIVE="CURSOR_INACTIVE",e}({});const a="CursorOverlay_cursor__OSCiH";var s=n(6417);const i=new Event(t.CURSOR_ACTIVE),l=new Event(t.CURSOR_INACTIVE),p=e=>{e.stopPropagation(),window.dispatchEvent(i)},c=e=>{e.stopPropagation(),window.dispatchEvent(l)},u=()=>{const[e,r]=(0,o.useState)(!1);(0,o.useMemo)((()=>{window.addEventListener(t.CURSOR_ACTIVE,(()=>{r(!0)})),window.addEventListener(t.CURSOR_INACTIVE,(()=>{r(!1)}))}),[]);const n=e?"white":"transparent";return(0,s.jsx)("div",{className:a,style:{backgroundColor:n}})}},9363:(e,r,n)=>{let o;n.d(r,{n:()=>o}),function(e){let r=function(e){return e.playerJump="playerJump",e.playerMoveBackward="playerMoveBackward",e.playerMoveForward="playerMoveForward",e.playerMoveLeft="playerMoveLeft",e.playerMoveRight="playerMoveRight",e.playerRun="playerRun",e.pinballFlipperBoth="pinballFlipperBoth",e.pinballFlipperLeft="pinballFlipperLeft",e.pinballFlipperRight="pinballFlipperRight",e.pinballShoot="pinballShoot",e}({}),n=function(e){return e.A="KeyA",e.D="KeyD",e.DOWN="ArrowDown",e.E="KeyE",e.F="KeyF",e.J="KeyJ",e.LEFT="ArrowLeft",e.Q="KeyQ",e.ENTER="Enter",e.RIGHT="ArrowRight",e.S="KeyS",e.SHIFT="Shift",e.SPACE="Space",e.UP="ArrowUp",e.W="KeyW",e.Z="KeyZ",e}({});const o=[{name:r.playerMoveBackward,keys:[n.DOWN,n.D]},{name:r.playerMoveForward,keys:[n.UP,n.E]},{name:r.playerMoveLeft,keys:[n.LEFT,n.S]},{name:r.playerMoveRight,keys:[n.RIGHT,n.F]}],t=[{name:r.playerJump,keys:[n.SPACE]},{name:r.playerRun,keys:[n.SHIFT]}],a=[{name:r.playerMoveBackward,keys:[n.DOWN,n.S]},{name:r.playerMoveForward,keys:[n.UP,n.W]},{name:r.playerMoveLeft,keys:[n.LEFT,n.A]},{name:r.playerMoveRight,keys:[n.RIGHT,n.D]}],s=[{name:r.playerMoveBackward,keys:[n.DOWN,n.S]},{name:r.playerMoveForward,keys:[n.UP,n.Z]},{name:r.playerMoveLeft,keys:[n.LEFT,n.Q]},{name:r.playerMoveRight,keys:[n.RIGHT,n.D]}];e.CONFIG_FIRST_PERSON_AZERTY=[...s,...t],e.CONFIG_FIRST_PERSON_UNIVERSAL=[...o,...t],e.CONFIG_FIRST_PERSON_QWERTY=[...a,...t],e.CONFIG_PINBALL_MACHINE=[{name:r.pinballFlipperBoth,keys:[n.SPACE]},{name:r.pinballFlipperLeft,keys:[n.F]},{name:r.pinballFlipperRight,keys:[n.J]},{name:r.pinballShoot,keys:[n.ENTER]}]}(o||(o={}))},4950:(e,r,n)=>{n.d(r,{o:()=>o});const o={BOX:{COUNT:10,MASS:0,SIZE:1},PLANE:{SIZE:10}}},5278:(e,r,n)=>{n.d(r,{r:()=>o});const o={DIRECTION:{BACKWARD:1,DOWN:-1,FORWARD:-1,LEFT:-1,NONE:0,RIGHT:1,UP:1},HEIGHT:1.75,MASS:75,POSITION:new(n(5825).Vector3)(0,2,2),SIZE:.5,VELOCITY:{DEFAULT:1,FORWARD:2,LATERAL:1,LONGITUDINAL:1,NONE:0,NORMAL:.5,RUN:3}}},6653:(e,r,n)=>{n.d(r,{n:()=>C});var o=n(1777),t=n(1898),a=n(3658),s=n(2952),i=n(3082),l=n(5825),p=n(6417);const c=e=>{const r=[100,100],n=new l.Euler(l.MathUtils.degToRad(-90),0,0);return(0,p.jsx)("group",{name:"Floor",...e,children:(0,p.jsx)(i.ib,{children:(0,p.jsx)(s.JO,{args:r,rotation:n,children:(0,p.jsx)("meshBasicMaterial",{color:6710886,side:l.DoubleSide})})})})};var u=n(4950);const d=new Array(u.o.BOX.COUNT).fill(null).map((()=>{const e=Math.floor(Math.random()*u.o.PLANE.SIZE-u.o.PLANE.SIZE/2),r=u.o.BOX.SIZE/2,n=Math.floor(Math.random()*u.o.PLANE.SIZE-u.o.PLANE.SIZE/2);return new l.Vector3(e,r,n)})),E=new Array(u.o.BOX.COUNT).fill(null).map(((e,r)=>({position:d[r]}))),y=e=>{let{position:r}=e;return(0,p.jsx)(i.ib,{colliders:"cuboid",type:"fixed",children:(0,p.jsx)(s.xu,{args:[u.o.BOX.SIZE,u.o.BOX.SIZE,u.o.BOX.SIZE],onPointerEnter:a.En,onPointerLeave:a.tK,onPointerOut:a.tK,onPointerOver:a.En,position:r,children:(0,p.jsx)("meshBasicMaterial",{color:16777215*Math.random(),opacity:.75,transparent:!0})})})},I=e=>(0,p.jsx)("group",{name:"Obstacles",...e,children:E.map(((e,r)=>{let{position:n}=e;return(0,p.jsx)(y,{position:n},r)}))});var R=n(9782),h=n(2738),O=n(4063),v=n(3002),S=n(7313),T=n(5278);const N=new l.Vector3,f=N.clone(),m=e=>{const r=(0,R.Z)((e=>e.playerJump)),n=(0,R.Z)((e=>e.playerMoveBackward)),o=(0,R.Z)((e=>e.playerMoveForward)),t=(0,R.Z)((e=>e.playerMoveLeft)),a=(0,R.Z)((e=>e.playerMoveRight)),l=(0,R.Z)((e=>e.playerRun)),c=(0,S.useRef)(null),u=(0,S.useRef)(null),d=(0,S.useRef)(null),[E,y]=(0,S.useState)(!0),[I,m]=(0,S.useState)(!1);return(0,S.useEffect)((()=>{I&&(setTimeout((()=>y(!0)),1e3),setTimeout((()=>m(!1)),230))}),[I]),(0,v.C)((()=>{const e=u.current.getObject(),s=c.current,i=d.current,p=s.linvel(),R=a?T.r.DIRECTION.RIGHT:t?T.r.DIRECTION.LEFT:T.r.DIRECTION.NONE,h=T.r.VELOCITY.LATERAL,O=o?T.r.DIRECTION.FORWARD:n?T.r.DIRECTION.BACKWARD:T.r.DIRECTION.NONE,v=o?T.r.VELOCITY.FORWARD:n?T.r.VELOCITY.DEFAULT:T.r.VELOCITY.NONE;E&&!I&&r&&(m(!0),y(!1));const S=r?T.r.DIRECTION.UP:T.r.DIRECTION.NONE,g=I&&r?T.r.VELOCITY.NORMAL:T.r.VELOCITY.NONE,C=l?T.r.VELOCITY.RUN:T.r.VELOCITY.DEFAULT;f.set(R*h*C,0,O*v*C),f.applyQuaternion(e.quaternion),f.y=p.y+S*g,n||o||t||a||s.setAngvel(N),s.setLinvel(f);const x=s.translation();e.position.copy(x),e.position.y+=T.r.HEIGHT-T.r.SIZE,i.position.copy(x),i.position.y=.001})),(0,p.jsxs)("group",{name:"Player",...e,children:[(0,p.jsx)(h.q,{ref:u}),(0,p.jsx)(i.ib,{canSleep:!1,colliders:"ball",mass:T.r.MASS,position:T.r.POSITION,ref:c,type:"dynamic",children:(0,p.jsx)(s.aL,{args:[T.r.SIZE,8,8],children:(0,p.jsx)("meshBasicMaterial",{color:65280,visible:!1,wireframe:!0})})}),(0,p.jsx)(O.j,{color:"black",colorStop:0,fog:!1,opacity:.5,ref:d})]})},g=e=>{const r=l.MathUtils.degToRad(-55),n=new l.Euler(r,0,0);return(0,p.jsx)("group",{name:"Stairs",...e,children:(0,p.jsx)(i.ib,{type:"fixed",children:(0,p.jsx)(s.xu,{args:[1,10,.2],rotation:n,children:(0,p.jsx)("meshBasicMaterial",{color:10066329,opacity:.25,transparent:!0})})})})},C=e=>(0,p.jsxs)("group",{name:"World",...e,children:[(0,p.jsx)(c,{}),(0,p.jsx)(I,{}),(0,p.jsx)(m,{}),(0,p.jsx)(o.$,{onPointerEnter:a.En,onPointerLeave:a.tK,position:[0,0,-5]}),(0,p.jsx)(t.$,{onPointerEnter:a.En,onPointerLeave:a.tK}),(0,p.jsx)(g,{})]})},3280:(e,r,n)=>{n.d(r,{p:()=>l});var o=n(4704),t=n(5397),a=n(9817);let s;var i;function l(){const{gravity:e,paused:r,showDebug:n}=(0,o.M4)(t.O.SCHEMA.PHYSICS,{gravity:s.gravity(),paused:s.paused(),showDebug:s.showDebug(!0)},a.F.folder(t.O.ORDER.PHYSICS));return{gravity:e,paused:r,showDebug:n}}(i=s||(s={})).gravity=function(){return{label:"Gravity",hint:"Default = 9.81",value:{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-9.80665,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}}},i.paused=function(){return{label:"Paused",hint:"Pause physics simulation.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},i.showDebug=function(){return{label:"Debug",hint:"Show debug geometry.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}},2968:(e,r,n)=>{n.r(r),n.d(r,{default:()=>T});var o=n(6653),t=n(9782),a=n(7066),s=n(5819),i=n(3082),l=n(2046),p=n(2082),c=n(8385),u=n(4704),d=n(7313),E=n(1724),y=n(7862),I=n(3658),R=n(9363),h=n(4662),O=n(3280),v=n(6417);const S=e=>{let{children:r}=e;const n=(0,h.p)(),o=(0,O.p)();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l._A,{}),(0,v.jsx)(s.Xz,{camera:void 0,flat:n.flat,frameloop:n.frameloop,linear:n.linear,orthographic:!1,shadows:n.shadows,children:(0,v.jsxs)(l.XR,{children:[(0,v.jsx)(p.z,{}),(0,v.jsx)(c.D,{}),(0,v.jsxs)(d.Suspense,{children:[(0,v.jsx)(E.Z,{}),(0,v.jsx)(y.u,{}),(0,v.jsx)(t.c,{map:R.n.CONFIG_FIRST_PERSON_UNIVERSAL,children:(0,v.jsx)(i.wI,{colliders:void 0,debug:o.showDebug,gravity:[o.gravity.x,o.gravity.y,o.gravity.z],paused:o.paused,timeStep:"vary",updatePriority:void 0,children:r})})]})]})}),(0,v.jsx)(I.MU,{}),(0,v.jsx)(u.Zf,{collapsed:!1,fill:!1,flat:!1,hidden:!1,oneLineLabels:!0,titleBar:!0}),(0,v.jsx)(a.a,{})]})},T=e=>(0,v.jsx)(S,{children:(0,v.jsx)(o.n,{...e})})}}]);