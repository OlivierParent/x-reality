"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[2226],{3081:(e,t,n)=>{n.d(t,{P:()=>p});var r=n(7462),a=n(7313),o=n(5825),i=n(6351),l=n(4296),s=n(2362);class u extends o.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new o.Vector3(0,0,0)},lightColor:{value:new o.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new o.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:"\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n        uniform vec3 spotPosition;\n        uniform float attenuation;\n\n        #include <common>\n        #include <logdepthbuf_pars_vertex>\n\n        void main() {\n          // compute intensity\n          vNormal = normalize(normalMatrix * normal);\n          vec4 worldPosition = modelMatrix * vec4(position, 1);\n          vec4 viewPosition = viewMatrix * worldPosition;\n          vViewZ = viewPosition.z;\n\n          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);\n\n          gl_Position = projectionMatrix * viewPosition;\n\n          #include <logdepthbuf_vertex>\n        }\n      ",fragmentShader:"\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n\n        uniform vec3 lightColor;\n        uniform float anglePower;\n        uniform sampler2D depth;\n        uniform vec2 resolution;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float opacity;\n\n        #include <packing>\n        #include <logdepthbuf_pars_fragment>\n\n        float readDepth(sampler2D depthSampler, vec2 uv) {\n          float fragCoordZ = texture(depthSampler, uv).r;\n\n          // https://github.com/mrdoob/three.js/issues/23072\n          #ifdef USE_LOGDEPTHBUF\n            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));\n          #else\n            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\n          #endif\n\n          return viewZ;\n        }\n\n        void main() {\n          #include <logdepthbuf_fragment>\n\n          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);\n          float intensity = vIntensity * angleIntensity;\n\n          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry\n          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;\n          if (isSoft) {\n            vec2 uv = gl_FragCoord.xy / resolution;\n            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));\n          }\n\n          gl_FragColor = vec4(lightColor, intensity * opacity);\n\n          #include <tonemapping_fragment>\n          #include <".concat(s.i>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n      ")})}}function c(e){let{opacity:t=1,radiusTop:n,radiusBottom:r,depthBuffer:l,color:s="white",distance:c=5,angle:p=.15,attenuation:d=5,anglePower:m=5}=e;const f=a.useRef(null),v=(0,i.A)((e=>e.size)),h=(0,i.A)((e=>e.camera)),g=(0,i.A)((e=>e.viewport.dpr)),[y]=a.useState((()=>new u)),[w]=a.useState((()=>new o.Vector3));n=void 0===n?.1:n,r=void 0===r?7*p:r,(0,i.C)((()=>{y.uniforms.spotPosition.value.copy(f.current.getWorldPosition(w)),f.current.lookAt(f.current.parent.target.getWorldPosition(w))}));const b=a.useMemo((()=>{const e=new o.CylinderGeometry(n,r,c,128,64,!0);return e.applyMatrix4((new o.Matrix4).makeTranslation(0,-c/2,0)),e.applyMatrix4((new o.Matrix4).makeRotationX(-Math.PI/2)),e}),[c,n,r]);return a.createElement(a.Fragment,null,a.createElement("mesh",{ref:f,geometry:b,raycast:()=>null},a.createElement("primitive",{object:y,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":s,"uniforms-attenuation-value":d,"uniforms-anglePower-value":m,"uniforms-depth-value":l,"uniforms-cameraNear-value":h.near,"uniforms-cameraFar-value":h.far,"uniforms-resolution-value":l?[v.width*g,v.height*g]:[0,0]})))}const p=a.forwardRef(((e,t)=>{let{opacity:n=1,radiusTop:o,radiusBottom:i,depthBuffer:s,color:u="white",distance:p=5,angle:d=.15,attenuation:m=5,anglePower:f=5,volumetric:v=!0,debug:h=!1,children:g,...y}=e;const w=a.useRef(null);return a.createElement("group",null,h&&w.current&&a.createElement("spotLightHelper",{args:[w.current]}),a.createElement("spotLight",(0,r.Z)({ref:(0,l.Z)([t,w]),angle:d,color:u,distance:p,castShadow:!0},y),v&&a.createElement(c,{debug:h,opacity:n,radiusTop:o,radiusBottom:i,depthBuffer:s,color:u,distance:p,angle:d,attenuation:m,anglePower:f})),g&&a.cloneElement(g,{spotlightRef:w,debug:h}))}))},8935:(e,t,n)=>{n.d(t,{o:()=>w});var r=n(7462),a=n(7313),o=n(6351),i=n(5825);class l extends i.ExtrudeGeometry{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{bevelEnabled:n=!1,bevelSize:r=8,bevelThickness:a=10,font:o,height:i=50,size:l=100,lineHeight:s=1,letterSpacing:u=0,...c}=t;if(void 0===o)super();else{super(o.generateShapes(e,l,{lineHeight:s,letterSpacing:u}),{...c,bevelEnabled:n,bevelSize:r,bevelThickness:a,depth:i})}this.type="TextGeometry"}}var s=n(676),u=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class p extends i.Loader{constructor(e){super(e)}load(e,t,n,r){const a=new i.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(e=>{if("string"!==typeof e)throw new Error("unsupported data type");const n=JSON.parse(e),r=this.parse(n);t&&t(r)}),n,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new d(e)}}class d{constructor(e){c(this,"data"),this.data=e}generateShapes(e){const t=[],n={letterSpacing:0,lineHeight:1,...arguments.length>2?arguments[2]:void 0},r=function(e,t,n,r){const a=Array.from(e),o=t/n.resolution,i=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,l=[];let s=0,u=0;for(let c=0;c<a.length;c++){const e=a[c];if("\n"===e)s=0,u-=i*r.lineHeight;else{const t=m(e,o,s,u,n);t&&(s+=t.offsetX+r.letterSpacing,l.push(t.path))}}return l}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,this.data,n);for(let a=0,o=r.length;a<o;a++)Array.prototype.push.apply(t,r[a].toShapes(!1));return t}}function m(e,t,n,r,a){const o=a.glyphs[e]||a.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".");const l=new i.ShapePath;let s,u,c,p,d,m,f,v;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let a=0,o=e.length;a<o;){switch(e[a++]){case"m":s=parseInt(e[a++])*t+n,u=parseInt(e[a++])*t+r,l.moveTo(s,u);break;case"l":s=parseInt(e[a++])*t+n,u=parseInt(e[a++])*t+r,l.lineTo(s,u);break;case"q":c=parseInt(e[a++])*t+n,p=parseInt(e[a++])*t+r,d=parseInt(e[a++])*t+n,m=parseInt(e[a++])*t+r,l.quadraticCurveTo(d,m,c,p);break;case"b":c=parseInt(e[a++])*t+n,p=parseInt(e[a++])*t+r,d=parseInt(e[a++])*t+n,m=parseInt(e[a++])*t+r,f=parseInt(e[a++])*t+n,v=parseInt(e[a++])*t+r,l.bezierCurveTo(d,m,f,v,c,p)}}}return{offsetX:o.ha*t,path:l}}c(d,"isFont"),c(d,"type");var f=n(1120);let v=null;async function h(e){v||(v=new p);let t="string"===typeof e?await(await fetch(e)).json():e;return v.parse(t)}function g(e){return(0,f.Rq)(h,[e])}g.preload=e=>(0,f.MA)(h,[e]),g.clear=e=>(0,f.ZH)([e]);const y=["string","number"],w=a.forwardRef(((e,t)=>{let{font:n,letterSpacing:i=0,lineHeight:u=1,size:c=1,height:p=.2,bevelThickness:d=.1,bevelSize:m=.01,bevelEnabled:f=!1,bevelOffset:v=0,bevelSegments:h=4,curveSegments:w=8,smooth:b,children:x,...S}=e;a.useMemo((()=>(0,o.e)({RenamedTextGeometry:l})),[]);const P=a.useRef(null),I=g(n),E=(0,a.useMemo)((()=>({font:I,size:c,height:p,bevelThickness:d,bevelSize:m,bevelEnabled:f,bevelSegments:h,bevelOffset:v,curveSegments:w,letterSpacing:i,lineHeight:u})),[I,c,p,d,m,f,h,v,w,i,u]),[C,...T]=(0,a.useMemo)((()=>(e=>{let t="";const n=[];return a.Children.forEach(e,(e=>{y.includes(typeof e)?t+=e+"":n.push(e)})),[t,...n]})(x)),[x]),M=a.useMemo((()=>[C,E]),[C,E]);return a.useLayoutEffect((()=>{b&&(P.current.geometry=(0,s.$1)(P.current.geometry,b),P.current.geometry.computeVertexNormals())}),[M,b]),a.useImperativeHandle(t,(()=>P.current),[]),a.createElement("mesh",(0,r.Z)({},S,{ref:P}),a.createElement("renamedTextGeometry",{args:M}),T)}))},5964:(e,t,n)=>{n.d(t,{H:()=>o});var r=n(7313),a=n(6351);function o(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];const l=r.useRef(),s=(0,a.A)((e=>e.scene));return r.useLayoutEffect((()=>{let n;if(e&&null!=e&&e.current&&t&&(l.current=n=new t(e.current,...o)),n)return n.traverse((e=>e.raycast=()=>null)),s.add(n),()=>{l.current=void 0,s.remove(n),null==n.dispose||n.dispose()}}),[s,t,e,...o]),(0,a.C)((()=>{var e;null==(e=l.current)||null==e.update||e.update()})),l}},2362:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(5825);const a=(()=>parseInt(r.REVISION.replace(/\D+/g,"")))()}}]);