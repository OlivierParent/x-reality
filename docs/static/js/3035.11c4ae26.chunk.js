"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[3035],{3658:(e,t,o)=>{o.d(t,{MU:()=>u,En:()=>l,tK:()=>d});var n=o(7313);let r=function(e){return e.CURSOR_ACTIVE="CURSOR_ACTIVE",e.CURSOR_INACTIVE="CURSOR_INACTIVE",e}({});const a="CursorOverlay_cursor__OSCiH";var s=o(6417);const i=new Event(r.CURSOR_ACTIVE),c=new Event(r.CURSOR_INACTIVE),l=e=>{e.stopPropagation(),window.dispatchEvent(i)},d=e=>{e.stopPropagation(),window.dispatchEvent(c)},u=()=>{const[e,t]=(0,n.useState)(!1);(0,n.useMemo)((()=>{window.addEventListener(r.CURSOR_ACTIVE,(()=>{t(!0)})),window.addEventListener(r.CURSOR_INACTIVE,(()=>{t(!1)}))}),[]);const o=e?"white":"transparent";return(0,s.jsx)("div",{className:a,style:{backgroundColor:o}})}},6167:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(259),r=o(7066),a=o(5819),s=o(4704),i=o(7313),c=o(4110),l=o(1724),d=o(7862),u=o(4662),p=o(6417);const m=e=>{let{children:t}=e;const o=(0,u.p)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Xz,{camera:void 0,flat:o.flat,frameloop:o.frameloop,linear:o.linear,orthographic:!1,shadows:o.shadows,children:(0,p.jsxs)(i.Suspense,{children:[(0,p.jsx)(c.z,{}),(0,p.jsx)(l.Z,{}),(0,p.jsx)(d.u,{}),(0,p.jsx)(n.z,{enableDamping:!0,enablePan:!0,enableZoom:!0}),t]})}),(0,p.jsx)(s.Zf,{collapsed:!1,fill:!1,flat:!1,hidden:!1,oneLineLabels:!0,titleBar:!0}),(0,p.jsx)(r.a,{})]})}},2157:(e,t,o)=>{o.r(t),o.d(t,{default:()=>D});var n=o(4839),r=o(2952),a=o(1707),s=o(7313),i=o(5825),c=o(6417);const l=document.createElement("video"),d=new i.VideoTexture(l),u=e=>{let{loop:t=!0,muted:o=!1,play:n=!1,src:r,volume:a=1}=e;return(0,s.useEffect)((()=>{l.loop=t}),[t]),(0,s.useEffect)((()=>{l.setAttribute("muted",o?"true":"false")}),[o]),(0,s.useEffect)((()=>{n?l.play():l.pause()}),[n]),(0,s.useEffect)((()=>{l.src=r,l.load()}),[r]),(0,s.useEffect)((()=>{l.volume=a}),[a]),(0,c.jsx)("meshBasicMaterial",{color:"white",map:d,toneMapped:!1})};var p=o(6893),m=o(848),f=o(6790),h=o(812);const v={SIZE:.1},x=.2,g={SIZE:.1,RADIUS:.1},M={ASPECT_RATIO:16/9},y=2,S={MAXIMUM:100,MINIMUM:0,STEP:5};var E=o(3658);const b=y*v.SIZE/2,P=e=>{let{clickHandler:t,color:o,colorHover:n="#ff00ff",colorIcon:a="#ffffff",icon:l,position:d=new i.Vector3,tooltip:u}=e;const[x,g]=(0,s.useState)(!1),M=(0,s.useCallback)((e=>{e.stopPropagation(),(0,E.En)(e),g(!0)}),[]),y=(0,s.useCallback)((e=>{e.stopPropagation(),(0,E.tK)(e),g(!1)}),[]);return(0,p.j)(x),(0,c.jsxs)("group",{name:"Television Button",position:d,children:[(0,c.jsx)(r.Cd,{args:[b,32],name:"Loop Button",onClick:t,onPointerEnter:M,onPointerLeave:y,onPointerOut:y,onPointerOver:M,children:(0,c.jsx)(h.E.meshBasicMaterial,{animate:{color:x?n:o,opacity:x?.5:1},initial:{color:"#000000"},transition:{color:{duration:.125},duration:.125,opacity:{duration:.5}},transparent:!0})}),l&&(0,c.jsx)(m.n,{fillMaterial:{color:a},strokeMaterial:{color:a},name:"Icon",position:[.4*-b,.045,.02],scale:.005,src:l}),u&&x&&(0,c.jsx)(f.V,{visible:!1,name:"Tooltip",position:[1.7*v.SIZE,.95*v.SIZE,0],style:{color:"hsl(120, 100%, 50%)",fontFamily:"monospace",width:"30em",textShadow:"0 0 .5em hsl(0, 0%, 0%)"},children:u})]})};const w=o.p+"static/media/pause.7dd58be16508f6a884b8cab782d42c68.svg";const I=o.p+"static/media/play.00a0bd70ce3dd2d95c5894e6d54c37e6.svg";const C=o.p+"static/media/repeat.d002f9e8295710892bd5148afb5a3ce9.svg";const j=o.p+"static/media/volume-down.5d40bf8c134fc0cdbd449e186a30f621.svg";const R=o.p+"static/media/volume-mute.0a12f70878452f6196f1cf42231ebb68.svg";const T=o.p+"static/media/volume-up.f9a25901fa3556487302b2fc7e74ddde.svg",k=y*v.SIZE/2,A=x/4,H=12*k,U=2*k,O=2*v.SIZE+.05,V=e=>{const{isLoopToggled:t,isMutedToggled:o,isPlayToggled:r,loopClickHandler:a,mutedClickHandler:s,playClickHandler:i,volume:l,volumeDownClickHandler:d,volumeUpClickHandler:u,position:p,rotation:m}=e;return(0,c.jsxs)("group",{name:"Television Remote",position:p,rotation:m,children:[(0,c.jsx)(n.Z,{args:[U+2*g.SIZE,H+2*g.SIZE,A],castShadow:!0,radius:g.RADIUS/4,position:[0,0,-A],receiveShadow:!0,children:(0,c.jsx)("meshStandardMaterial",{color:3355443})}),(0,c.jsx)(P,{clickHandler:s,color:o?"#666600":"#444444",colorHover:o?"#ff0000":"#00ff00",icon:R,name:"Mute Button",position:[0,2*O,0],tooltip:"Set muted to ".concat(o?"off":"on",".")}),(0,c.jsx)(P,{clickHandler:i,color:r?"#660000":"#006600",colorHover:r?"#ff0000":"#00ff00",icon:r?w:I,name:"Play Button",position:[0,1*O,0],tooltip:"".concat(r?"Pause":"Play"," video.")}),(0,c.jsx)(P,{clickHandler:a,color:t?"#666600":"#444444",colorHover:"#0000ff",icon:C,name:"Loop Button",position:[0,0,0],tooltip:"Set loop to ".concat(t?"on":"off",".")}),(0,c.jsx)(P,{clickHandler:u,color:"#444444",colorHover:"#0000ff",icon:T,name:"Volume Up Button",position:[0,-1*O,0],tooltip:"Turn volume up (".concat(l,"%).")}),(0,c.jsx)(P,{clickHandler:d,color:"#444444",colorHover:"#0000ff",icon:j,name:"Volume Down Button",position:[0,-2*O,0],tooltip:"Turn volume down (".concat(l,"%).")})]})},Z=o.p+"static/media/Video_by_Dana_Nettles.e8f12e570b18a8c2e03e.mp4",W=[{src:Z,title:"Video by Dana Nettles",url:"https://www.pexels.com/video/pouring-a-hot-tea-on-a-crystal-cup-3568312/"}],_=y,z=y*M.ASPECT_RATIO,N=e=>{const[t,o]=(0,s.useState)(!0),[l,d]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),[f,h]=(0,s.useState)(S.MAXIMUM),v=(0,s.useCallback)((e=>{e.stopPropagation(),o((e=>!e))}),[]),M=(0,s.useCallback)((e=>{e.stopPropagation(),d((e=>!e))}),[]),E=(0,s.useCallback)((e=>{e.stopPropagation(),m((e=>!e))}),[]),b=(0,s.useCallback)((e=>{e.stopPropagation(),h((e=>(e-=S.STEP,S.MINIMUM<e?e:S.MINIMUM)))}),[]),P=(0,s.useCallback)((e=>{e.stopPropagation(),h((e=>(e+=S.STEP)<S.MAXIMUM?e:S.MAXIMUM))}),[]);return(0,c.jsxs)("group",{name:"Television",...e,children:[(0,c.jsxs)("group",{position:[0,(y+g.RADIUS)/2+3*g.RADIUS,0],children:[(0,c.jsx)(n.Z,{args:[z+2*g.SIZE,_+2*g.SIZE,x],castShadow:!0,position:[0,0,-x/2],radius:g.RADIUS,receiveShadow:!0,children:(0,c.jsx)("meshStandardMaterial",{color:3355443})}),(0,c.jsx)(r.JO,{args:[z,_],position:[0,0,.01],children:(0,c.jsx)(u,{loop:t,muted:l,play:p,src:W[0].src,volume:f/S.MAXIMUM})})]}),(0,c.jsx)(V,{isLoopToggled:t,isMutedToggled:l,isPlayToggled:p,loopClickHandler:v,mutedClickHandler:M,playClickHandler:E,position:[0,0,3],rotation:[-i.MathUtils.degToRad(45),0,0],volume:f,volumeDownClickHandler:b,volumeUpClickHandler:P}),(0,c.jsx)(a.x,{color:6710886,fontSize:.1,position:[0,-.1,0],children:"".concat(W[0].title," \u2014 ").concat(W[0].url)})]})};var L=o(6167);const D=e=>(0,c.jsx)(L.A,{children:(0,c.jsx)(N,{...e})})},4839:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(7462),r=o(7313),a=o(5825),s=o(676);const i=1e-5;const c=r.forwardRef((function(e,t){let{args:[o=1,c=1,l=1]=[],radius:d=.05,steps:u=1,smoothness:p=4,bevelSegments:m=4,creaseAngle:f=.4,children:h,...v}=e;const x=r.useMemo((()=>function(e,t,o){const n=new a.Shape,r=o-i;return n.absarc(i,i,i,-Math.PI/2,-Math.PI,!0),n.absarc(i,t-2*r,i,Math.PI,Math.PI/2,!0),n.absarc(e-2*r,t-2*r,i,Math.PI/2,0,!0),n.absarc(e-2*r,i,i,0,-Math.PI/2,!0),n}(o,c,d)),[o,c,d]),g=r.useMemo((()=>({depth:l-2*d,bevelEnabled:!0,bevelSegments:2*m,steps:u,bevelSize:d-i,bevelThickness:d,curveSegments:p})),[l,d,p]),M=r.useRef(null);return r.useLayoutEffect((()=>{M.current&&(M.current.center(),(0,s.LZ)(M.current,f))}),[x,g]),r.createElement("mesh",(0,n.Z)({ref:t},v),r.createElement("extrudeGeometry",{ref:M,args:[x,g]}),h)}))},6790:(e,t,o)=>{o.d(t,{V:()=>x});var n=o(7462),r=o(7313),a=o(1739),s=o(5825),i=o(6351);const c=new s.Vector3,l=new s.Vector3,d=new s.Vector3;function u(e,t,o){const n=c.setFromMatrixPosition(e.matrixWorld);n.project(t);const r=o.width/2,a=o.height/2;return[n.x*r+r,-n.y*a+a]}const p=e=>Math.abs(e)<1e-10?0:e;function m(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(";for(let r=0;16!==r;r++)n+=p(t[r]*e.elements[r])+(15!==r?",":")");return o+n}const f=(h=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>m(e,h));var h;const v=(e,t)=>{return m(e,[1/(o=t),1/o,1/o,1,-1/o,-1/o,-1/o,-1,1/o,1/o,1/o,1,1,1,1,1],"translate(-50%,-50%)");var o};const x=r.forwardRef(((e,t)=>{let{children:o,eps:m=.001,style:h,className:x,prepend:g,center:M,fullscreen:y,portal:S,distanceFactor:E,sprite:b=!1,transform:P=!1,occlude:w,onOcclude:I,castShadow:C,receiveShadow:j,material:R,geometry:T,zIndexRange:k=[16777271,0],calculatePosition:A=u,as:H="div",wrapperClass:U,pointerEvents:O="auto",...V}=e;const{gl:Z,camera:W,scene:_,size:z,raycaster:N,events:L,viewport:D}=(0,i.A)(),[F]=r.useState((()=>document.createElement(H))),B=r.useRef(),X=r.useRef(null),G=r.useRef(0),K=r.useRef([0,0]),J=r.useRef(null),q=r.useRef(null),Q=(null==S?void 0:S.current)||L.connected||Z.domElement.parentNode,Y=r.useRef(null),$=r.useRef(!1),ee=r.useMemo((()=>w&&"blending"!==w||Array.isArray(w)&&w.length&&function(e){return e&&"object"===typeof e&&"current"in e}(w[0])),[w]);r.useLayoutEffect((()=>{const e=Z.domElement;w&&"blending"===w?(e.style.zIndex="".concat(Math.floor(k[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[w]),r.useLayoutEffect((()=>{if(X.current){const e=B.current=a.s(F);if(_.updateMatrixWorld(),P)F.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=A(X.current,W,z);F.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return Q&&(g?Q.prepend(F):Q.appendChild(F)),()=>{Q&&Q.removeChild(F),e.unmount()}}}),[Q,P]),r.useLayoutEffect((()=>{U&&(F.className=U)}),[U]);const te=r.useMemo((()=>P?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:M?"translate3d(-50%,-50%,0)":"none",...y&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...h}),[h,M,y,z,P]),oe=r.useMemo((()=>({position:"absolute",pointerEvents:O})),[O]);r.useLayoutEffect((()=>{var e,n;($.current=!1,P)?null==(e=B.current)||e.render(r.createElement("div",{ref:J,style:te},r.createElement("div",{ref:q,style:oe},r.createElement("div",{ref:t,className:x,style:h,children:o})))):null==(n=B.current)||n.render(r.createElement("div",{ref:t,style:te,className:x,children:o}))}));const ne=r.useRef(!0);(0,i.C)((e=>{if(X.current){W.updateMatrixWorld(),X.current.updateWorldMatrix(!0,!1);const e=P?K.current:A(X.current,W,z);if(P||Math.abs(G.current-W.zoom)>m||Math.abs(K.current[0]-e[0])>m||Math.abs(K.current[1]-e[1])>m){const t=function(e,t){const o=c.setFromMatrixPosition(e.matrixWorld),n=l.setFromMatrixPosition(t.matrixWorld),r=o.sub(n),a=t.getWorldDirection(d);return r.angleTo(a)>Math.PI/2}(X.current,W);let o=!1;ee&&(Array.isArray(w)?o=w.map((e=>e.current)):"blending"!==w&&(o=[_]));const n=ne.current;if(o){const e=function(e,t,o,n){const r=c.setFromMatrixPosition(e.matrixWorld),a=r.clone();a.project(t),o.setFromCamera(a,t);const s=o.intersectObjects(n,!0);if(s.length){const e=s[0].distance;return r.distanceTo(o.ray.origin)<e}return!0}(X.current,W,N,o);ne.current=e&&!t}else ne.current=!t;n!==ne.current&&(I?I(!ne.current):F.style.display=ne.current?"block":"none");const r=Math.floor(k[0]/2),a=w?ee?[k[0],r]:[r-1,0]:k;if(F.style.zIndex="".concat(function(e,t,o){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){const n=c.setFromMatrixPosition(e.matrixWorld),r=l.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(r),s=(o[1]-o[0])/(t.far-t.near),i=o[1]-s*t.far;return Math.round(s*a+i)}}(X.current,W,a)),P){const[e,t]=[z.width/2,z.height/2],o=W.projectionMatrix.elements[5]*t,{isOrthographicCamera:n,top:r,left:a,bottom:s,right:i}=W,c=f(W.matrixWorldInverse),l=n?"scale(".concat(o,")translate(").concat(p(-(i+a)/2),"px,").concat(p((r+s)/2),"px)"):"translateZ(".concat(o,"px)");let d=X.current.matrixWorld;b&&(d=W.matrixWorldInverse.clone().transpose().copyPosition(d).scale(X.current.scale),d.elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),F.style.width=z.width+"px",F.style.height=z.height+"px",F.style.perspective=n?"":"".concat(o,"px"),J.current&&q.current&&(J.current.style.transform="".concat(l).concat(c,"translate(").concat(e,"px,").concat(t,"px)"),q.current.style.transform=v(d,1/((E||10)/400)))}else{const t=void 0===E?1:function(e,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(t instanceof s.PerspectiveCamera){const o=c.setFromMatrixPosition(e.matrixWorld),n=l.setFromMatrixPosition(t.matrixWorld),r=t.fov*Math.PI/180,a=o.distanceTo(n);return 1/(2*Math.tan(r/2)*a)}return 1}(X.current,W)*E;F.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}K.current=e,G.current=W.zoom}}if(!ee&&Y.current&&!$.current)if(P){if(J.current){const e=J.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=W;if(t||T)V.scale&&(Array.isArray(V.scale)?V.scale instanceof s.Vector3?Y.current.scale.copy(V.scale.clone().divideScalar(1)):Y.current.scale.set(1/V.scale[0],1/V.scale[1],1/V.scale[2]):Y.current.scale.setScalar(1/V.scale));else{const t=(E||10)/400,o=e.clientWidth*t,n=e.clientHeight*t;Y.current.scale.set(o,n,1)}$.current=!0}}}else{const t=F.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/D.factor,o=t.clientWidth*e,n=t.clientHeight*e;Y.current.scale.set(o,n,1),$.current=!0}Y.current.lookAt(e.camera.position)}}));const re=r.useMemo((()=>({vertexShader:P?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[P]);return r.createElement("group",(0,n.Z)({},V,{ref:X}),w&&!ee&&r.createElement("mesh",{castShadow:C,receiveShadow:j,ref:Y},T||r.createElement("planeGeometry",null),R||r.createElement("shaderMaterial",{side:s.DoubleSide,vertexShader:re.vertexShader,fragmentShader:re.fragmentShader})))}))}}]);