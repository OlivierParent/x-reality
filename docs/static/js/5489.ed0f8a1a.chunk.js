"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[5489],{5489:(t,e,r)=>{r.d(e,{n:()=>c});var n=r(7462),o=r(9080),i=r(7313),s=r(5825);class a extends s.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,e,r,n){const o=this,i=new s.FileLoader(o.manager);i.setPath(o.path),i.setRequestHeader(o.requestHeader),i.setWithCredentials(o.withCredentials),i.load(t,(function(r){try{e(o.parse(r))}catch(i){n?n(i):console.error(i),o.manager.itemError(t)}}),r,n)}parse(t){const e=this;function r(t,e,r,o,i,s,a,c){if(0==e||0==r)return void t.lineTo(c.x,c.y);o=o*Math.PI/180,e=Math.abs(e),r=Math.abs(r);const l=(a.x-c.x)/2,u=(a.y-c.y)/2,y=Math.cos(o)*l+Math.sin(o)*u,f=-Math.sin(o)*l+Math.cos(o)*u;let h=e*e,p=r*r;const d=y*y,x=f*f,b=d/h+x/p;if(b>1){const t=Math.sqrt(b);h=(e*=t)*e,p=(r*=t)*r}const g=h*x+p*d,m=(h*p-g)/g;let k=Math.sqrt(Math.max(0,m));i===s&&(k=-k);const v=k*e*f/r,w=-k*r*y/e,A=Math.cos(o)*v-Math.sin(o)*w+(a.x+c.x)/2,M=Math.sin(o)*v+Math.cos(o)*w+(a.y+c.y)/2,P=n(1,0,(y-v)/e,(f-w)/r),T=n((y-v)/e,(f-w)/r,(-y-v)/e,(-f-w)/r)%(2*Math.PI);t.currentPath.absellipse(A,M,e,r,P,P+T,0===s,o)}function n(t,e,r,n){const o=t*r+e*n,i=Math.sqrt(t*t+e*e)*Math.sqrt(r*r+n*n);let s=Math.acos(Math.max(-1,Math.min(1,o/i)));return t*n-e*r<0&&(s=-s),s}function o(t,e){e=Object.assign({},e);let r={};if(t.hasAttribute("class")){const e=t.getAttribute("class").split(/\s/).filter(Boolean).map((t=>t.trim()));for(let t=0;t<e.length;t++)r=Object.assign(r,p["."+e[t]])}function n(n,o,i){void 0===i&&(i=function(t){return t.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),t}),t.hasAttribute(n)&&(e[o]=i(t.getAttribute(n))),r[n]&&(e[o]=i(r[n])),t.style&&""!==t.style[n]&&(e[o]=i(t.style[n]))}function o(t){return Math.max(0,Math.min(1,u(t)))}function i(t){return Math.max(0,u(t))}return t.hasAttribute("id")&&(r=Object.assign(r,p["#"+t.getAttribute("id")])),n("fill","fill"),n("fill-opacity","fillOpacity",o),n("fill-rule","fillRule"),n("opacity","opacity",o),n("stroke","stroke"),n("stroke-opacity","strokeOpacity",o),n("stroke-width","strokeWidth",i),n("stroke-linejoin","strokeLineJoin"),n("stroke-linecap","strokeLineCap"),n("stroke-miterlimit","strokeMiterLimit",i),n("visibility","visibility"),e}function i(t,e){return t-(e-t)}function a(t,e,r){if("string"!==typeof t)throw new TypeError("Invalid input: "+typeof t);const n={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let o=0,i=!0,s="",a="";const c=[];function l(t,e,r){const n=new SyntaxError('Unexpected character "'+t+'" at index '+e+".");throw n.partial=r,n}function u(){""!==s&&(""===a?c.push(Number(s)):c.push(Number(s)*Math.pow(10,Number(a)))),s="",a=""}let y;const f=t.length;for(let h=0;h<f;h++)if(y=t[h],Array.isArray(e)&&e.includes(c.length%r)&&n.FLAGS.test(y))o=1,s=y,u();else{if(0===o){if(n.WHITESPACE.test(y))continue;if(n.DIGIT.test(y)||n.SIGN.test(y)){o=1,s=y;continue}if(n.POINT.test(y)){o=2,s=y;continue}n.COMMA.test(y)&&(i&&l(y,h,c),i=!0)}if(1===o){if(n.DIGIT.test(y)){s+=y;continue}if(n.POINT.test(y)){s+=y,o=2;continue}if(n.EXP.test(y)){o=3;continue}n.SIGN.test(y)&&1===s.length&&n.SIGN.test(s[0])&&l(y,h,c)}if(2===o){if(n.DIGIT.test(y)){s+=y;continue}if(n.EXP.test(y)){o=3;continue}n.POINT.test(y)&&"."===s[s.length-1]&&l(y,h,c)}if(3===o){if(n.DIGIT.test(y)){a+=y;continue}if(n.SIGN.test(y)){if(""===a){a+=y;continue}1===a.length&&n.SIGN.test(a)&&l(y,h,c)}}n.WHITESPACE.test(y)?(u(),o=0,i=!1):n.COMMA.test(y)?(u(),o=0,i=!0):n.SIGN.test(y)?(u(),o=1,s=y):n.POINT.test(y)?(u(),o=2,s=y):l(y,h,c)}return u(),c}const c=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function u(t){let r,n="px";if("string"===typeof t||t instanceof String)for(let e=0,o=c.length;e<o;e++){const r=c[e];if(t.endsWith(r)){n=r,t=t.substring(0,t.length-r.length);break}}return"px"===n&&"px"!==e.defaultUnit?r=l.in[e.defaultUnit]/e.defaultDPI:(r=l[n][e.defaultUnit],r<0&&(r=l[n].in*e.defaultDPI)),r*parseFloat(t)}function y(t){const e=t.elements;return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function f(t){const e=t.elements;return Math.sqrt(e[3]*e[3]+e[4]*e[4])}const h=[],p={},d=[],x=new s.Matrix3,b=new s.Matrix3,g=new s.Matrix3,m=new s.Matrix3,k=new s.Vector2,v=new s.Vector3,w=new s.Matrix3,A=(new DOMParser).parseFromString(t,"image/svg+xml");!function t(e,n){if(1!==e.nodeType)return;const c=function(t){if(!(t.hasAttribute("transform")||"use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))))return null;const e=function(t){const e=new s.Matrix3,r=x;if("use"===t.nodeName&&(t.hasAttribute("x")||t.hasAttribute("y"))){const r=u(t.getAttribute("x")),n=u(t.getAttribute("y"));e.translate(r,n)}if(t.hasAttribute("transform")){const n=t.getAttribute("transform").split(")");for(let t=n.length-1;t>=0;t--){const o=n[t].trim();if(""===o)continue;const i=o.indexOf("("),s=o.length;if(i>0&&i<s){const t=o.substr(0,i),e=a(o.substr(i+1,s-i-1));switch(r.identity(),t){case"translate":if(e.length>=1){const t=e[0];let n=t;e.length>=2&&(n=e[1]),r.translate(t,n)}break;case"rotate":if(e.length>=1){let t=0,n=0,o=0;t=-e[0]*Math.PI/180,e.length>=3&&(n=e[1],o=e[2]),b.identity().translate(-n,-o),g.identity().rotate(t),m.multiplyMatrices(g,b),b.identity().translate(n,o),r.multiplyMatrices(b,m)}break;case"scale":if(e.length>=1){const t=e[0];let n=t;e.length>=2&&(n=e[1]),r.scale(t,n)}break;case"skewX":1===e.length&&r.set(1,Math.tan(e[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===e.length&&r.set(1,0,0,Math.tan(e[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===e.length&&r.set(e[0],e[2],e[4],e[1],e[3],e[5],0,0,1)}}e.premultiply(r)}}return e}(t);d.length>0&&e.premultiply(d[d.length-1]);return w.copy(e),d.push(e),e}(e);let l=!0,A=null;switch(e.nodeName){case"svg":break;case"style":!function(t){if(!t.sheet||!t.sheet.cssRules||!t.sheet.cssRules.length)return;for(let e=0;e<t.sheet.cssRules.length;e++){const r=t.sheet.cssRules[e];if(1!==r.type)continue;const n=r.selectorText.split(/,/gm).filter(Boolean).map((t=>t.trim()));for(let t=0;t<n.length;t++)p[n[t]]=Object.assign(p[n[t]]||{},r.style)}}(e);break;case"g":n=o(e,n);break;case"path":n=o(e,n),e.hasAttribute("d")&&(A=function(t){const e=new s.ShapePath,n=new s.Vector2,o=new s.Vector2,c=new s.Vector2;let l=!0,u=!1;const y=t.getAttribute("d"),f=y.match(/[a-df-z][^a-df-z]*/gi);for(let s=0,h=f.length;s<h;s++){const t=f[s],y=t.charAt(0),h=t.substr(1).trim();let p;switch(!0===l&&(u=!0,l=!1),y){case"M":p=a(h);for(let t=0,r=p.length;t<r;t+=2)n.x=p[t+0],n.y=p[t+1],o.x=n.x,o.y=n.y,0===t?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y),0===t&&c.copy(n);break;case"H":p=a(h);for(let t=0,r=p.length;t<r;t++)n.x=p[t],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"V":p=a(h);for(let t=0,r=p.length;t<r;t++)n.y=p[t],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"L":p=a(h);for(let t=0,r=p.length;t<r;t+=2)n.x=p[t+0],n.y=p[t+1],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"C":p=a(h);for(let t=0,r=p.length;t<r;t+=6)e.bezierCurveTo(p[t+0],p[t+1],p[t+2],p[t+3],p[t+4],p[t+5]),o.x=p[t+2],o.y=p[t+3],n.x=p[t+4],n.y=p[t+5],0===t&&!0===u&&c.copy(n);break;case"S":p=a(h);for(let t=0,r=p.length;t<r;t+=4)e.bezierCurveTo(i(n.x,o.x),i(n.y,o.y),p[t+0],p[t+1],p[t+2],p[t+3]),o.x=p[t+0],o.y=p[t+1],n.x=p[t+2],n.y=p[t+3],0===t&&!0===u&&c.copy(n);break;case"Q":p=a(h);for(let t=0,r=p.length;t<r;t+=4)e.quadraticCurveTo(p[t+0],p[t+1],p[t+2],p[t+3]),o.x=p[t+0],o.y=p[t+1],n.x=p[t+2],n.y=p[t+3],0===t&&!0===u&&c.copy(n);break;case"T":p=a(h);for(let t=0,r=p.length;t<r;t+=2){const r=i(n.x,o.x),s=i(n.y,o.y);e.quadraticCurveTo(r,s,p[t+0],p[t+1]),o.x=r,o.y=s,n.x=p[t+0],n.y=p[t+1],0===t&&!0===u&&c.copy(n)}break;case"A":p=a(h,[3,4],7);for(let t=0,i=p.length;t<i;t+=7){if(p[t+5]==n.x&&p[t+6]==n.y)continue;const i=n.clone();n.x=p[t+5],n.y=p[t+6],o.x=n.x,o.y=n.y,r(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],i,n),0===t&&!0===u&&c.copy(n)}break;case"m":p=a(h);for(let t=0,r=p.length;t<r;t+=2)n.x+=p[t+0],n.y+=p[t+1],o.x=n.x,o.y=n.y,0===t?e.moveTo(n.x,n.y):e.lineTo(n.x,n.y),0===t&&c.copy(n);break;case"h":p=a(h);for(let t=0,r=p.length;t<r;t++)n.x+=p[t],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"v":p=a(h);for(let t=0,r=p.length;t<r;t++)n.y+=p[t],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"l":p=a(h);for(let t=0,r=p.length;t<r;t+=2)n.x+=p[t+0],n.y+=p[t+1],o.x=n.x,o.y=n.y,e.lineTo(n.x,n.y),0===t&&!0===u&&c.copy(n);break;case"c":p=a(h);for(let t=0,r=p.length;t<r;t+=6)e.bezierCurveTo(n.x+p[t+0],n.y+p[t+1],n.x+p[t+2],n.y+p[t+3],n.x+p[t+4],n.y+p[t+5]),o.x=n.x+p[t+2],o.y=n.y+p[t+3],n.x+=p[t+4],n.y+=p[t+5],0===t&&!0===u&&c.copy(n);break;case"s":p=a(h);for(let t=0,r=p.length;t<r;t+=4)e.bezierCurveTo(i(n.x,o.x),i(n.y,o.y),n.x+p[t+0],n.y+p[t+1],n.x+p[t+2],n.y+p[t+3]),o.x=n.x+p[t+0],o.y=n.y+p[t+1],n.x+=p[t+2],n.y+=p[t+3],0===t&&!0===u&&c.copy(n);break;case"q":p=a(h);for(let t=0,r=p.length;t<r;t+=4)e.quadraticCurveTo(n.x+p[t+0],n.y+p[t+1],n.x+p[t+2],n.y+p[t+3]),o.x=n.x+p[t+0],o.y=n.y+p[t+1],n.x+=p[t+2],n.y+=p[t+3],0===t&&!0===u&&c.copy(n);break;case"t":p=a(h);for(let t=0,r=p.length;t<r;t+=2){const r=i(n.x,o.x),s=i(n.y,o.y);e.quadraticCurveTo(r,s,n.x+p[t+0],n.y+p[t+1]),o.x=r,o.y=s,n.x=n.x+p[t+0],n.y=n.y+p[t+1],0===t&&!0===u&&c.copy(n)}break;case"a":p=a(h,[3,4],7);for(let t=0,i=p.length;t<i;t+=7){if(0==p[t+5]&&0==p[t+6])continue;const i=n.clone();n.x+=p[t+5],n.y+=p[t+6],o.x=n.x,o.y=n.y,r(e,p[t],p[t+1],p[t+2],p[t+3],p[t+4],i,n),0===t&&!0===u&&c.copy(n)}break;case"Z":case"z":e.currentPath.autoClose=!0,e.currentPath.curves.length>0&&(n.copy(c),e.currentPath.currentPoint.copy(n),l=!0);break;default:console.warn(t)}u=!1}return e}(e));break;case"rect":n=o(e,n),A=function(t){const e=u(t.getAttribute("x")||0),r=u(t.getAttribute("y")||0),n=u(t.getAttribute("rx")||t.getAttribute("ry")||0),o=u(t.getAttribute("ry")||t.getAttribute("rx")||0),i=u(t.getAttribute("width")),a=u(t.getAttribute("height")),c=.448084975506,l=new s.ShapePath;l.moveTo(e+n,r),l.lineTo(e+i-n,r),(0!==n||0!==o)&&l.bezierCurveTo(e+i-n*c,r,e+i,r+o*c,e+i,r+o);l.lineTo(e+i,r+a-o),(0!==n||0!==o)&&l.bezierCurveTo(e+i,r+a-o*c,e+i-n*c,r+a,e+i-n,r+a);l.lineTo(e+n,r+a),(0!==n||0!==o)&&l.bezierCurveTo(e+n*c,r+a,e,r+a-o*c,e,r+a-o);l.lineTo(e,r+o),(0!==n||0!==o)&&l.bezierCurveTo(e,r+o*c,e+n*c,r,e+n,r);return l}(e);break;case"polygon":n=o(e,n),A=function(t){function e(t,e,r){const i=u(e),s=u(r);0===o?n.moveTo(i,s):n.lineTo(i,s),o++}const r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,n=new s.ShapePath;let o=0;return t.getAttribute("points").replace(r,e),n.currentPath.autoClose=!0,n}(e);break;case"polyline":n=o(e,n),A=function(t){function e(t,e,r){const i=u(e),s=u(r);0===o?n.moveTo(i,s):n.lineTo(i,s),o++}const r=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,n=new s.ShapePath;let o=0;return t.getAttribute("points").replace(r,e),n.currentPath.autoClose=!1,n}(e);break;case"circle":n=o(e,n),A=function(t){const e=u(t.getAttribute("cx")||0),r=u(t.getAttribute("cy")||0),n=u(t.getAttribute("r")||0),o=new s.Path;o.absarc(e,r,n,0,2*Math.PI);const i=new s.ShapePath;return i.subPaths.push(o),i}(e);break;case"ellipse":n=o(e,n),A=function(t){const e=u(t.getAttribute("cx")||0),r=u(t.getAttribute("cy")||0),n=u(t.getAttribute("rx")||0),o=u(t.getAttribute("ry")||0),i=new s.Path;i.absellipse(e,r,n,o,0,2*Math.PI);const a=new s.ShapePath;return a.subPaths.push(i),a}(e);break;case"line":n=o(e,n),A=function(t){const e=u(t.getAttribute("x1")||0),r=u(t.getAttribute("y1")||0),n=u(t.getAttribute("x2")||0),o=u(t.getAttribute("y2")||0),i=new s.ShapePath;return i.moveTo(e,r),i.lineTo(n,o),i.currentPath.autoClose=!1,i}(e);break;case"defs":case"mask":l=!1;break;case"use":n=o(e,n);const c=e.href.baseVal.substring(1),y=e.viewportElement.getElementById(c);y?t(y,n):console.warn("SVGLoader: 'use node' references non-existent node id: "+c)}if(A&&(void 0!==n.fill&&"none"!==n.fill&&A.color.setStyle(n.fill),function(t,e){function r(t){v.set(t.x,t.y,1).applyMatrix3(e),t.set(v.x,v.y)}const n=function(t){return 0!==t.elements[1]||0!==t.elements[3]}(e),o=t.subPaths;for(let i=0,s=o.length;i<s;i++){const t=o[i].curves;for(let o=0;o<t.length;o++){const i=t[o];i.isLineCurve?(r(i.v1),r(i.v2)):i.isCubicBezierCurve?(r(i.v0),r(i.v1),r(i.v2),r(i.v3)):i.isQuadraticBezierCurve?(r(i.v0),r(i.v1),r(i.v2)):i.isEllipseCurve&&(n&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),k.set(i.aX,i.aY),r(k),i.aX=k.x,i.aY=k.y,i.xRadius*=y(e),i.yRadius*=f(e))}}}(A,w),h.push(A),A.userData={node:e,style:n}),l){const r=e.childNodes;for(let e=0;e<r.length;e++)t(r[e],n)}c&&(d.pop(),d.length>0?w.copy(d[d.length-1]):w.identity())}(A.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:h,xml:A.documentElement}}static createShapes(t){const e=999999999,r=0,n=1,o=2,i=3,a=4,c=5,l=6,u={loc:r,t:0};function y(t,e,n,i){const s=t.x,a=e.x,c=n.x,l=i.x,y=t.y,h=e.y,p=n.y,d=i.y,x=(l-c)*(y-p)-(d-p)*(s-c),b=(d-p)*(a-s)-(l-c)*(h-y),g=x/b,m=((a-s)*(y-p)-(h-y)*(s-c))/b;if(0===b&&0!==x||g<=0||g>=1||m<0||m>1)return null;if(0===x&&0===b){for(let c=0;c<2;c++){if(f(0===c?n:i,t,e),u.loc==r){const t=0===c?n:i;return{x:t.x,y:t.y,t:u.t}}if(u.loc==o){return{x:+(s+u.t*(a-s)).toPrecision(10),y:+(y+u.t*(h-y)).toPrecision(10),t:u.t}}}return null}for(let o=0;o<2;o++)if(f(0===o?n:i,t,e),u.loc==r){const t=0===o?n:i;return{x:t.x,y:t.y,t:u.t}}return{x:+(s+g*(a-s)).toPrecision(10),y:+(y+g*(h-y)).toPrecision(10),t:g}}function f(t,e,s){const y=s.x-e.x,f=s.y-e.y,h=t.x-e.x,p=t.y-e.y,d=y*p-h*f;if(t.x===e.x&&t.y===e.y)return u.loc=r,void(u.t=0);if(t.x===s.x&&t.y===s.y)return u.loc=n,void(u.t=1);if(d<-Number.EPSILON)return void(u.loc=i);if(d>Number.EPSILON)return void(u.loc=a);if(y*h<0||f*p<0)return void(u.loc=c);if(Math.sqrt(y*y+f*f)<Math.sqrt(h*h+p*p))return void(u.loc=l);let x;x=0!==y?h/y:p/f,u.loc=o,u.t=x}function h(t,e,r){const n=new s.Vector2;e.getCenter(n);const o=[];return r.forEach((e=>{if(e.boundingBox.containsPoint(n)){(function(t,e){const r=[],n=[];for(let o=1;o<t.length;o++){const i=t[o-1],a=t[o];for(let t=1;t<e.length;t++){const o=y(i,a,e[t-1],e[t]);null!==o&&void 0===r.find((t=>t.t<=o.t+Number.EPSILON&&t.t>=o.t-Number.EPSILON))&&(r.push(o),n.push(new s.Vector2(o.x,o.y)))}}return n})(t,e.points).forEach((t=>{o.push({identifier:e.identifier,isCW:e.isCW,point:t})}))}})),o.sort(((t,e)=>t.point.x-e.point.x)),o}let p=0,d=e,x=-999999999,b=t.subPaths.map((t=>{const r=t.getPoints();let n=-999999999,o=e,i=-999999999,a=e;for(let e=0;e<r.length;e++){const t=r[e];t.y>n&&(n=t.y),t.y<o&&(o=t.y),t.x>i&&(i=t.x),t.x<a&&(a=t.x)}return x<=i&&(x=i+1),d>=a&&(d=a-1),{curves:t.curves,points:r,isCW:s.ShapeUtils.isClockWise(r),identifier:p++,boundingBox:new s.Box2(new s.Vector2(a,o),new s.Vector2(i,n))}}));b=b.filter((t=>t.points.length>1));const g=b.map((e=>function(t,e,r,n,o){null!==o&&void 0!==o&&""!==o||(o="nonzero");const i=new s.Vector2;t.boundingBox.getCenter(i);const a=h([new s.Vector2(r,i.y),new s.Vector2(n,i.y)],t.boundingBox,e);a.sort(((t,e)=>t.point.x-e.point.x));const c=[],l=[];a.forEach((e=>{e.identifier===t.identifier?c.push(e):l.push(e)}));const u=c[0].point.x,y=[];let f=0;for(;f<l.length&&l[f].point.x<u;)y.length>0&&y[y.length-1]===l[f].identifier?y.pop():y.push(l[f].identifier),f++;if(y.push(t.identifier),"evenodd"===o){const e=y.length%2===0,r=y[y.length-2];return{identifier:t.identifier,isHole:e,for:r}}if("nonzero"===o){let r=!0,n=null,o=null;for(let t=0;t<y.length;t++){const i=y[t];r?(o=e[i].isCW,r=!1,n=i):o!==e[i].isCW&&(o=e[i].isCW,r=!0)}return{identifier:t.identifier,isHole:r,for:n}}console.warn('fill-rule: "'+o+'" is currently not implemented.')}(e,b,d,x,t.userData.style.fillRule))),m=[];return b.forEach((t=>{if(!g[t.identifier].isHole){const e=new s.Shape;e.curves=t.curves;g.filter((e=>e.isHole&&e.for===t.identifier)).forEach((t=>{const r=b[t.identifier],n=new s.Path;n.curves=r.curves,e.holes.push(n)})),m.push(e)}})),m}static getStrokeStyle(t,e,r,n,o){return{strokeColor:e=void 0!==e?e:"#000",strokeWidth:t=void 0!==t?t:1,strokeLineJoin:r=void 0!==r?r:"miter",strokeLineCap:n=void 0!==n?n:"butt",strokeMiterLimit:o=void 0!==o?o:4}}static pointsToStroke(t,e,r,n){const o=[],i=[],c=[];if(0===a.pointsToStrokeWithBuffers(t,e,r,n,o,i,c))return null;const l=new s.BufferGeometry;return l.setAttribute("position",new s.Float32BufferAttribute(o,3)),l.setAttribute("normal",new s.Float32BufferAttribute(i,3)),l.setAttribute("uv",new s.Float32BufferAttribute(c,2)),l}static pointsToStrokeWithBuffers(t,e,r,n,o,i,a,c){const l=new s.Vector2,u=new s.Vector2,y=new s.Vector2,f=new s.Vector2,h=new s.Vector2,p=new s.Vector2,d=new s.Vector2,x=new s.Vector2,b=new s.Vector2,g=new s.Vector2,m=new s.Vector2,k=new s.Vector2,v=new s.Vector2,w=new s.Vector2,A=new s.Vector2,M=new s.Vector2,P=new s.Vector2;r=void 0!==r?r:12,n=void 0!==n?n:.001,c=void 0!==c?c:0;const T=(t=function(t){let e=!1;for(let o=1,i=t.length-1;o<i;o++)if(t[o].distanceTo(t[o+1])<n){e=!0;break}if(!e)return t;const r=[];r.push(t[0]);for(let o=1,i=t.length-1;o<i;o++)t[o].distanceTo(t[o+1])>=n&&r.push(t[o]);return r.push(t[t.length-1]),r}(t)).length;if(T<2)return 0;const S=t[0].equals(t[T-1]);let V,C,I=t[0];const E=e.strokeWidth/2,L=1/(T-1);let N,D,O,W,z=0,G=!1,B=0,q=3*c,R=2*c;F(t[0],t[1],l).multiplyScalar(E),x.copy(t[0]).sub(l),b.copy(t[0]).add(l),g.copy(x),m.copy(b);for(let s=1;s<T;s++){V=t[s],C=s===T-1?S?t[1]:void 0:t[s+1];const r=l;if(F(I,V,r),y.copy(r).multiplyScalar(E),k.copy(V).sub(y),v.copy(V).add(y),N=z+L,D=!1,void 0!==C){F(V,C,u),y.copy(u).multiplyScalar(E),w.copy(V).sub(y),A.copy(V).add(y),O=!0,y.subVectors(C,I),r.dot(y)<0&&(O=!1),1===s&&(G=O),y.subVectors(C,V),y.normalize();const t=Math.abs(r.dot(y));if(0!==t){const r=E/t;y.multiplyScalar(-r),f.subVectors(V,I),h.copy(f).setLength(r).add(y),M.copy(h).negate();const n=h.length(),o=f.length();f.divideScalar(o),p.subVectors(C,V);const i=p.length();switch(p.divideScalar(i),f.dot(M)<o&&p.dot(M)<i&&(D=!0),P.copy(h).add(V),M.add(V),W=!1,D?O?(A.copy(M),v.copy(M)):(w.copy(M),k.copy(M)):U(),e.strokeLineJoin){case"bevel":X(O,D,N);break;case"round":Z(O,D),O?j(V,k,w,N,0):j(V,A,v,N,1);break;default:const t=E*e.strokeMiterLimit/n;if(t<1){if("miter-clip"!==e.strokeLineJoin){X(O,D,N);break}Z(O,D),O?(p.subVectors(P,k).multiplyScalar(t).add(k),d.subVectors(P,w).multiplyScalar(t).add(w),H(k,N,0),H(p,N,0),H(V,N,.5),H(V,N,.5),H(p,N,0),H(d,N,0),H(V,N,.5),H(d,N,0),H(w,N,0)):(p.subVectors(P,v).multiplyScalar(t).add(v),d.subVectors(P,A).multiplyScalar(t).add(A),H(v,N,1),H(p,N,1),H(V,N,.5),H(V,N,.5),H(p,N,1),H(d,N,1),H(V,N,.5),H(d,N,1),H(A,N,1))}else D?(O?(H(b,z,1),H(x,z,0),H(P,N,0),H(b,z,1),H(P,N,0),H(M,N,1)):(H(b,z,1),H(x,z,0),H(P,N,1),H(x,z,0),H(M,N,0),H(P,N,1)),O?w.copy(P):A.copy(P)):O?(H(k,N,0),H(P,N,0),H(V,N,.5),H(V,N,.5),H(P,N,0),H(w,N,0)):(H(v,N,1),H(P,N,1),H(V,N,.5),H(V,N,.5),H(P,N,1),H(A,N,1)),W=!0}}else U()}else U();S||s!==T-1||J(t[0],g,m,O,!0,z),z=N,I=V,x.copy(w),b.copy(A)}if(S){if(D&&o){let t=P,e=M;G!==O&&(t=M,e=P),O?(W||G)&&(e.toArray(o,0),e.toArray(o,9),W&&t.toArray(o,3)):!W&&G||(e.toArray(o,3),e.toArray(o,9),W&&t.toArray(o,0))}}else J(V,k,v,O,!1,N);return B;function F(t,e,r){return r.subVectors(e,t),r.set(-r.y,r.x).normalize()}function H(t,e,r){o&&(o[q]=t.x,o[q+1]=t.y,o[q+2]=0,i&&(i[q]=0,i[q+1]=0,i[q+2]=1),q+=3,a&&(a[R]=e,a[R+1]=r,R+=2)),B+=3}function j(t,e,n,o,i){l.copy(e).sub(t).normalize(),u.copy(n).sub(t).normalize();let s=Math.PI;const a=l.dot(u);Math.abs(a)<1&&(s=Math.abs(Math.acos(a))),s/=r,y.copy(e);for(let c=0,l=r-1;c<l;c++)f.copy(y).rotateAround(t,s),H(y,o,i),H(f,o,i),H(t,o,.5),y.copy(f);H(f,o,i),H(n,o,i),H(t,o,.5)}function U(){H(b,z,1),H(x,z,0),H(k,N,0),H(b,z,1),H(k,N,1),H(v,N,0)}function X(t,e,r){e?t?(H(b,z,1),H(x,z,0),H(k,N,0),H(b,z,1),H(k,N,0),H(M,N,1),H(k,r,0),H(w,r,0),H(M,r,.5)):(H(b,z,1),H(x,z,0),H(v,N,1),H(x,z,0),H(M,N,0),H(v,N,1),H(v,r,1),H(A,r,0),H(M,r,.5)):t?(H(k,r,0),H(w,r,0),H(V,r,.5)):(H(v,r,1),H(A,r,0),H(V,r,.5))}function Z(t,e){e&&(t?(H(b,z,1),H(x,z,0),H(k,N,0),H(b,z,1),H(k,N,0),H(M,N,1),H(k,z,0),H(V,N,.5),H(M,N,1),H(V,N,.5),H(w,z,0),H(M,N,1)):(H(b,z,1),H(x,z,0),H(v,N,1),H(x,z,0),H(M,N,0),H(v,N,1),H(v,z,1),H(M,N,0),H(V,N,.5),H(V,N,.5),H(M,N,0),H(A,z,1)))}function J(t,r,n,i,s,a){switch(e.strokeLineCap){case"round":s?j(t,n,r,a,.5):j(t,r,n,a,.5);break;case"square":if(s)l.subVectors(r,t),u.set(l.y,-l.x),y.addVectors(l,u).add(t),f.subVectors(u,l).add(t),i?(y.toArray(o,3),f.toArray(o,0),f.toArray(o,9)):(y.toArray(o,3),y.toArray(o,9),f.toArray(o,0));else{l.subVectors(n,t),u.set(l.y,-l.x),y.addVectors(l,u).add(t),f.subVectors(u,l).add(t);const e=o.length;i?(y.toArray(o,e-3),f.toArray(o,e-6),f.toArray(o,e-12)):(y.toArray(o,e-6),f.toArray(o,e-3),f.toArray(o,e-12))}}}}}const c=(0,i.forwardRef)((function(t,e){let{src:r,skipFill:c,skipStrokes:l,fillMaterial:u,strokeMaterial:y,fillMeshProps:f,strokeMeshProps:h,...p}=t;const d=(0,o.F)(a,r.startsWith("<svg")?"data:image/svg+xml;utf8,".concat(r):r),x=(0,i.useMemo)((()=>l?[]:d.paths.map((t=>{var e;return void 0===(null==(e=t.userData)?void 0:e.style.stroke)||"none"===t.userData.style.stroke?null:t.subPaths.map((e=>a.pointsToStroke(e.getPoints(),t.userData.style)))}))),[d,l]);return(0,i.useEffect)((()=>()=>x.forEach((t=>t&&t.map((t=>t.dispose()))))),[x]),i.createElement("object3D",(0,n.Z)({ref:e},p),i.createElement("object3D",{scale:[1,-1,1]},d.paths.map(((t,e)=>{var r,o;return i.createElement(i.Fragment,{key:e},!c&&void 0!==(null==(r=t.userData)?void 0:r.style.fill)&&"none"!==t.userData.style.fill&&a.createShapes(t).map(((e,r)=>i.createElement("mesh",(0,n.Z)({key:r},f),i.createElement("shapeGeometry",{args:[e]}),i.createElement("meshBasicMaterial",(0,n.Z)({color:t.userData.style.fill,opacity:t.userData.style.fillOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},u))))),!l&&void 0!==(null==(o=t.userData)?void 0:o.style.stroke)&&"none"!==t.userData.style.stroke&&t.subPaths.map(((r,o)=>i.createElement("mesh",(0,n.Z)({key:o,geometry:x[e][o]},h),i.createElement("meshBasicMaterial",(0,n.Z)({color:t.userData.style.stroke,opacity:t.userData.style.strokeOpacity,transparent:!0,side:s.DoubleSide,depthWrite:!1},y))))))}))))}))}}]);