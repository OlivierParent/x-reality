"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[6288],{3658:(e,t,n)=>{n.d(t,{MU:()=>d,En:()=>l,tK:()=>u});var r=n(7313);let o=function(e){return e.CURSOR_ACTIVE="CURSOR_ACTIVE",e.CURSOR_INACTIVE="CURSOR_INACTIVE",e}({});const a="CursorOverlay_cursor__OSCiH";var c=n(6417);const s=new Event(o.CURSOR_ACTIVE),i=new Event(o.CURSOR_INACTIVE),l=e=>{e.stopPropagation(),window.dispatchEvent(s)},u=e=>{e.stopPropagation(),window.dispatchEvent(i)},d=()=>{const[e,t]=(0,r.useState)(!1);(0,r.useMemo)((()=>{window.addEventListener(o.CURSOR_ACTIVE,(()=>{t(!0)})),window.addEventListener(o.CURSOR_INACTIVE,(()=>{t(!1)}))}),[]);const n=e?"white":"transparent";return(0,c.jsx)("div",{className:a,style:{backgroundColor:n}})}},6167:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(259),o=n(7066),a=n(5819),c=n(4704),s=n(7313),i=n(4110),l=n(1724),u=n(7862),d=n(4662),f=n(6417);const m=e=>{let{children:t}=e;const n=(0,d.p)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Xz,{camera:void 0,flat:n.flat,frameloop:n.frameloop,linear:n.linear,orthographic:!1,shadows:n.shadows,children:(0,f.jsxs)(s.Suspense,{children:[(0,f.jsx)(i.z,{}),(0,f.jsx)(l.Z,{}),(0,f.jsx)(u.u,{}),(0,f.jsx)(r.z,{enableDamping:!0,enablePan:!0,enableZoom:!0}),t]})}),(0,f.jsx)(c.Zf,{collapsed:!1,fill:!1,flat:!1,hidden:!1,oneLineLabels:!0,titleBar:!0}),(0,f.jsx)(o.a,{})]})}},6851:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var r=n(4839),o=n(2952),a=n(1707),c=n(848),s=n(7313),i=n(5825),l=n(6417);const u=document.createElement("video"),d=new i.VideoTexture(u),f=e=>{let{loop:t=!0,muted:n=!1,play:r=!1,src:o,volume:a=1}=e;return(0,s.useEffect)((()=>{u.loop=t}),[t]),(0,s.useEffect)((()=>{u.setAttribute("muted",n?"true":"false")}),[n]),(0,s.useEffect)((()=>{r?u.play():u.pause()}),[r]),(0,s.useEffect)((()=>{u.src=o,u.load()}),[o]),(0,s.useEffect)((()=>{u.volume=a}),[a]),(0,l.jsx)("meshBasicMaterial",{color:"white",map:d,toneMapped:!1})},m={SIZE:.1},p=.2,h={SIZE:.1,RADIUS:.1},M={ASPECT_RATIO:16/9},v=2,x={MAXIMUM:100,MINIMUM:0,STEP:5},g=n.p+"static/media/Video_by_Dana_Nettles.e8f12e570b18a8c2e03e.mp4";const y=n.p+"static/media/volume-down.f441bff2f74955c749e807dd4363c3ae.svg",b=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let E=1234567;const w=Math.PI/180,I=180/Math.PI;function P(e,t){return(e%t+t)%t}function S(e,t,n){return(1-n)*e+n*t}const C={DEG2RAD:w,RAD2DEG:I,generateUUID:function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(b[255&e]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]+"-"+b[255&t]+b[t>>8&255]+"-"+b[t>>16&15|64]+b[t>>24&255]+"-"+b[63&n|128]+b[n>>8&255]+"-"+b[n>>16&255]+b[n>>24&255]+b[255&r]+b[r>>8&255]+b[r>>16&255]+b[r>>24&255]).toLowerCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:P,mapLinear:function(e,t,n,r,o){return r+(e-t)*(o-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:S,damp:function(e,t,n,r){return S(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(P(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(E=e);let t=E+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*w},radToDeg:function(e){return e*I},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,o){const a=Math.cos,c=Math.sin,s=a(n/2),i=c(n/2),l=a((t+r)/2),u=c((t+r)/2),d=a((t-r)/2),f=c((t-r)/2),m=a((r-t)/2),p=c((r-t)/2);switch(o){case"XYX":e.set(s*u,i*d,i*f,s*l);break;case"YZY":e.set(i*f,s*u,i*d,s*l);break;case"ZXZ":e.set(i*d,i*f,s*u,s*l);break;case"XZX":e.set(s*u,i*p,i*m,s*l);break;case"YXY":e.set(i*m,s*u,i*p,s*l);break;case"ZYZ":e.set(i*p,i*m,s*u,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}},normalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}},denormalize:function(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}};var A=n(6893),R=n(6790),T=n(6644),k=n(3658);const j=v*m.SIZE/2,U=e=>{let{clickHandler:t,color:n,colorHover:r="#ff00ff",position:a=new i.Vector3,rotation:c=new i.Euler,tooltip:u=""}=e;const[d,f]=(0,s.useState)(!1),p=(0,s.useCallback)((e=>{e.stopPropagation(),(0,k.En)(e),f(!0)}),[]),h=(0,s.useCallback)((e=>{e.stopPropagation(),(0,k.tK)(e),f(!1)}),[]);return(0,A.j)(d),(0,l.jsxs)("group",{name:"Television Button",position:a,rotation:c,children:[(0,l.jsx)(o.Cd,{args:[j,32],name:"Loop Button",onClick:t,onPointerEnter:p,onPointerLeave:h,onPointerOut:h,onPointerOver:p,children:(0,l.jsx)(T.E.meshBasicMaterial,{animate:{color:d?r:n,opacity:d?.5:1},initial:{color:"#000000"},transition:{color:{duration:.125},duration:.125,opacity:{duration:.5}},transparent:!0})}),""!==u&&d&&(0,l.jsx)(R.V,{name:"Tooltip",position:[1.7*m.SIZE,.95*m.SIZE,0],style:{color:"hsl(120, 100%, 50%)",fontFamily:"monospace",width:"30em",textShadow:"0 0 .5em hsl(0, 0%, 0%)"},children:u})]})},H=e=>{const{isLoopToggled:t,isMutedToggled:n,isPlayToggled:r,loopClickHandler:o,mutedClickHandler:a,playClickHandler:c,volume:s,volumeDownClickHandler:i,volumeUpClickHandler:u,position:d,rotation:f}=e;return(0,l.jsxs)("group",{name:"Television Remote",position:d,rotation:f,children:[(0,l.jsx)(U,{clickHandler:a,color:n?"#ffff00":"#999900",colorHover:"#ff00ff",name:"Mute Button",position:[0,2*m.SIZE*1,0],tooltip:"Set muted to ".concat(n?"off":"on",".")}),(0,l.jsx)(U,{clickHandler:c,color:r?"#ff0000":"#990000",colorHover:"#ff00ff",name:"Play Button",position:[0,2*m.SIZE*0,0],tooltip:"".concat(r?"Pause":"Play"," video.")}),(0,l.jsx)(U,{clickHandler:o,color:t?"#0000ff":"#000099",colorHover:"#ff00ff",name:"Loop Button",position:[0,2*-m.SIZE*1,0],tooltip:"Set loop to ".concat(t?"on":"off",".")}),(0,l.jsx)(U,{clickHandler:u,color:t?"#00ff00":"#009900",colorHover:"#ffff00",name:"Volume Up Button",position:[0,2*-m.SIZE*2,0],tooltip:"Turn volume up (".concat(s,"%).")}),(0,l.jsx)(U,{clickHandler:i,color:t?"#ff0000":"#990000",colorHover:"#ffff00",name:"Volume Down Button",position:[0,2*-m.SIZE*3,0],tooltip:"Turn volume down (".concat(s,"%).")})]})},Z=[{src:g,title:"Video by Dana Nettles",url:"https://www.pexels.com/video/pouring-a-hot-tea-on-a-crystal-cup-3568312/"}],O=v,L=v*M.ASPECT_RATIO,F=e=>{const[t,n]=(0,s.useState)(!0),[i,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),[M,g]=(0,s.useState)(x.MAXIMUM),b=(0,s.useCallback)((e=>{e.stopPropagation(),n((e=>!e))}),[]),E=(0,s.useCallback)((e=>{e.stopPropagation(),u((e=>!e))}),[]),w=(0,s.useCallback)((e=>{e.stopPropagation(),m((e=>!e))}),[]),I=(0,s.useCallback)((e=>{e.stopPropagation(),g((e=>(e-=x.STEP,x.MINIMUM<e?e:x.MINIMUM)))}),[]),P=(0,s.useCallback)((e=>{e.stopPropagation(),g((e=>(e+=x.STEP)<x.MAXIMUM?e:x.MAXIMUM))}),[]);return(0,l.jsxs)("group",{name:"Television",...e,children:[(0,l.jsxs)("group",{position:[0,(v+h.RADIUS)/2+3*h.RADIUS,0],children:[(0,l.jsx)(r.Z,{args:[L+2*h.SIZE,O+2*h.SIZE,p],castShadow:!0,position:[0,0,-p/2],radius:h.RADIUS,receiveShadow:!0,children:(0,l.jsx)("meshStandardMaterial",{color:3355443})}),(0,l.jsx)(o.JO,{args:[L,O],position:[0,0,.01],children:(0,l.jsx)(f,{loop:t,muted:i,play:d,src:Z[0].src,volume:M/x.MAXIMUM})})]}),(0,l.jsx)(H,{isLoopToggled:t,isMutedToggled:i,isPlayToggled:d,loopClickHandler:b,mutedClickHandler:E,playClickHandler:w,position:[0,0,3],rotation:[-C.degToRad(45),0,0],volume:M,volumeDownClickHandler:I,volumeUpClickHandler:P}),(0,l.jsx)(a.x,{color:6710886,fontSize:.1,position:[0,-.1,0],children:"".concat(Z[0].title," \u2014 ").concat(Z[0].url)}),(0,l.jsx)(c.n,{src:y,children:(0,l.jsx)("meshBasicMaterial",{color:6710886})})]})};var V=n(6167);const z=e=>(0,l.jsx)(V.A,{children:(0,l.jsx)(F,{...e})})},4839:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(7462),o=n(7313),a=n(5825),c=n(676);const s=1e-5;const i=o.forwardRef((function(e,t){let{args:[n=1,i=1,l=1]=[],radius:u=.05,steps:d=1,smoothness:f=4,bevelSegments:m=4,creaseAngle:p=.4,children:h,...M}=e;const v=o.useMemo((()=>function(e,t,n){const r=new a.Shape,o=n-s;return r.absarc(s,s,s,-Math.PI/2,-Math.PI,!0),r.absarc(s,t-2*o,s,Math.PI,Math.PI/2,!0),r.absarc(e-2*o,t-2*o,s,Math.PI/2,0,!0),r.absarc(e-2*o,s,s,0,-Math.PI/2,!0),r}(n,i,u)),[n,i,u]),x=o.useMemo((()=>({depth:l-2*u,bevelEnabled:!0,bevelSegments:2*m,steps:d,bevelSize:u-s,bevelThickness:u,curveSegments:f})),[l,u,f]),g=o.useRef(null);return o.useLayoutEffect((()=>{g.current&&(g.current.center(),(0,c.LZ)(g.current,p))}),[v,x]),o.createElement("mesh",(0,r.Z)({ref:t},M),o.createElement("extrudeGeometry",{ref:g,args:[v,x]}),h)}))},2952:(e,t,n)=>{n.d(t,{Ab:()=>l,Cd:()=>s,FC:()=>M,FM:()=>h,JO:()=>d,KC:()=>f,N1:()=>x,Qq:()=>i,aL:()=>u,fg:()=>m,vO:()=>p,xu:()=>c,yI:()=>v});var r=n(7462),o=n(7313);function a(e,t){const n=e+"Geometry";return o.forwardRef(((e,a)=>{let{args:c,children:s,...i}=e;const l=o.useRef(null);return o.useImperativeHandle(a,(()=>l.current)),o.useLayoutEffect((()=>{null==t||t(l.current)})),o.createElement("mesh",(0,r.Z)({ref:l},i),o.createElement(n,{attach:"geometry",args:c}),s)}))}const c=a("box"),s=a("circle"),i=a("cone"),l=a("cylinder"),u=a("sphere"),d=a("plane"),f=a("torus"),m=a("torusKnot"),p=a("tetrahedron"),h=a("ring"),M=a("icosahedron"),v=a("octahedron"),x=a("dodecahedron")},6790:(e,t,n)=>{n.d(t,{V:()=>v});var r=n(7462),o=n(7313),a=n(1739),c=n(5825),s=n(3002);const i=new c.Vector3,l=new c.Vector3,u=new c.Vector3;function d(e,t,n){const r=i.setFromMatrixPosition(e.matrixWorld);r.project(t);const o=n.width/2,a=n.height/2;return[r.x*o+o,-r.y*a+a]}const f=e=>Math.abs(e)<1e-10?0:e;function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let o=0;16!==o;o++)r+=f(t[o]*e.elements[o])+(15!==o?",":")");return n+r}const p=(h=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>m(e,h));var h;const M=(e,t)=>{return m(e,[1/(n=t),1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1],"translate(-50%,-50%)");var n};const v=o.forwardRef(((e,t)=>{let{children:n,eps:m=.001,style:h,className:v,prepend:x,center:g,fullscreen:y,portal:b,distanceFactor:E,sprite:w=!1,transform:I=!1,occlude:P,onOcclude:S,castShadow:C,receiveShadow:A,material:R,geometry:T,zIndexRange:k=[16777271,0],calculatePosition:j=d,as:U="div",wrapperClass:H,pointerEvents:Z="auto",...O}=e;const{gl:L,camera:F,scene:V,size:z,raycaster:W,events:_,viewport:N}=(0,s.A)(),[D]=o.useState((()=>document.createElement(U))),X=o.useRef(),B=o.useRef(null),Y=o.useRef(0),G=o.useRef([0,0]),K=o.useRef(null),Q=o.useRef(null),J=(null==b?void 0:b.current)||_.connected||L.domElement.parentNode,q=o.useRef(null),$=o.useRef(!1),ee=o.useMemo((()=>P&&"blending"!==P||Array.isArray(P)&&P.length&&function(e){return e&&"object"===typeof e&&"current"in e}(P[0])),[P]);o.useLayoutEffect((()=>{const e=L.domElement;P&&"blending"===P?(e.style.zIndex="".concat(Math.floor(k[0]/2)),e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[P]),o.useLayoutEffect((()=>{if(B.current){const e=X.current=a.s(D);if(V.updateMatrixWorld(),I)D.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=j(B.current,F,z);D.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return J&&(x?J.prepend(D):J.appendChild(D)),()=>{J&&J.removeChild(D),e.unmount()}}}),[J,I]),o.useLayoutEffect((()=>{H&&(D.className=H)}),[H]);const te=o.useMemo((()=>I?{position:"absolute",top:0,left:0,width:z.width,height:z.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:g?"translate3d(-50%,-50%,0)":"none",...y&&{top:-z.height/2,left:-z.width/2,width:z.width,height:z.height},...h}),[h,g,y,z,I]),ne=o.useMemo((()=>({position:"absolute",pointerEvents:Z})),[Z]);o.useLayoutEffect((()=>{var e,r;($.current=!1,I)?null==(e=X.current)||e.render(o.createElement("div",{ref:K,style:te},o.createElement("div",{ref:Q,style:ne},o.createElement("div",{ref:t,className:v,style:h,children:n})))):null==(r=X.current)||r.render(o.createElement("div",{ref:t,style:te,className:v,children:n}))}));const re=o.useRef(!0);(0,s.C)((e=>{if(B.current){F.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);const e=I?G.current:j(B.current,F,z);if(I||Math.abs(Y.current-F.zoom)>m||Math.abs(G.current[0]-e[0])>m||Math.abs(G.current[1]-e[1])>m){const t=function(e,t){const n=i.setFromMatrixPosition(e.matrixWorld),r=l.setFromMatrixPosition(t.matrixWorld),o=n.sub(r),a=t.getWorldDirection(u);return o.angleTo(a)>Math.PI/2}(B.current,F);let n=!1;ee&&(Array.isArray(P)?n=P.map((e=>e.current)):"blending"!==P&&(n=[V]));const r=re.current;if(n){const e=function(e,t,n,r){const o=i.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),n.setFromCamera(a,t);const c=n.intersectObjects(r,!0);if(c.length){const e=c[0].distance;return o.distanceTo(n.ray.origin)<e}return!0}(B.current,F,W,n);re.current=e&&!t}else re.current=!t;r!==re.current&&(S?S(!re.current):D.style.display=re.current?"block":"none");const o=Math.floor(k[0]/2),a=P?ee?[k[0],o]:[o-1,0]:k;if(D.style.zIndex="".concat(function(e,t,n){if(t instanceof c.PerspectiveCamera||t instanceof c.OrthographicCamera){const r=i.setFromMatrixPosition(e.matrixWorld),o=l.setFromMatrixPosition(t.matrixWorld),a=r.distanceTo(o),c=(n[1]-n[0])/(t.far-t.near),s=n[1]-c*t.far;return Math.round(c*a+s)}}(B.current,F,a)),I){const[e,t]=[z.width/2,z.height/2],n=F.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:o,left:a,bottom:c,right:s}=F,i=p(F.matrixWorldInverse),l=r?"scale(".concat(n,")translate(").concat(f(-(s+a)/2),"px,").concat(f((o+c)/2),"px)"):"translateZ(".concat(n,"px)");let u=B.current.matrixWorld;w&&(u=F.matrixWorldInverse.clone().transpose().copyPosition(u).scale(B.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),D.style.width=z.width+"px",D.style.height=z.height+"px",D.style.perspective=r?"":"".concat(n,"px"),K.current&&Q.current&&(K.current.style.transform="".concat(l).concat(i,"translate(").concat(e,"px,").concat(t,"px)"),Q.current.style.transform=M(u,1/((E||10)/400)))}else{const t=void 0===E?1:function(e,t){if(t instanceof c.OrthographicCamera)return t.zoom;if(t instanceof c.PerspectiveCamera){const n=i.setFromMatrixPosition(e.matrixWorld),r=l.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=n.distanceTo(r);return 1/(2*Math.tan(o/2)*a)}return 1}(B.current,F)*E;D.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(t,")")}G.current=e,Y.current=F.zoom}}if(!ee&&q.current&&!$.current)if(I){if(K.current){const e=K.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=F;if(t||T)O.scale&&(Array.isArray(O.scale)?O.scale instanceof c.Vector3?q.current.scale.copy(O.scale.clone().divideScalar(1)):q.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):q.current.scale.setScalar(1/O.scale));else{const t=(E||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;q.current.scale.set(n,r,1)}$.current=!0}}}else{const t=D.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/N.factor,n=t.clientWidth*e,r=t.clientHeight*e;q.current.scale.set(n,r,1),$.current=!0}q.current.lookAt(e.camera.position)}}));const oe=o.useMemo((()=>({vertexShader:I?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom" \n            is false. \n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n            \n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[I]);return o.createElement("group",(0,r.Z)({},O,{ref:B}),P&&!ee&&o.createElement("mesh",{castShadow:C,receiveShadow:A,ref:q},T||o.createElement("planeGeometry",null),R||o.createElement("shaderMaterial",{side:c.DoubleSide,vertexShader:oe.vertexShader,fragmentShader:oe.fragmentShader})))}))}}]);