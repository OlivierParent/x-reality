"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[7864],{1777:(e,t,o)=>{o.d(t,{$:()=>l});var n=o(1707),r=o(7313);const s=o.p+"static/media/bensound-evolution.4375aef0bb0aa53f542e.mp3";var a=o(6417);const i=new Audio(s);i.volume=.02;const l=e=>{const[t,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t?i.play():i.pause()}),[t]),(0,a.jsx)("group",{...e,children:(0,a.jsxs)(n.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),o((e=>!e))},position:[0,.5,0],children:["Global Audio, ",t?"playing":"music",": https://www.bensound.com"]})})}},1898:(e,t,o)=>{o.d(t,{$:()=>l});var n=o(1707),r=o(6866),s=o(7313);const a=o.p+"static/media/bensound-badass.8ef4f40c2805fd404725.mp3";var i=o(6417);const l=e=>{const t=(0,s.useRef)(null),[o,l]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t.current.isPlaying||t.current.play()}),[]),(0,s.useEffect)((()=>{o?t.current.play():t.current.stop()}),[o]),(0,i.jsxs)("group",{...e,children:[(0,i.jsxs)(n.x,{fontSize:.2,onClick:e=>{e.stopPropagation(),l((e=>!e))},position:[0,.5,0],children:["Positional Audio, ",o?"playing":"music",": https://www.bensound.com"]}),(0,i.jsx)(r.V,{autoplay:!0,distance:1,loop:!0,ref:t,url:a})]})}},3658:(e,t,o)=>{o.d(t,{MU:()=>d,En:()=>c,tK:()=>u});var n=o(7313);let r=function(e){return e.CURSOR_ACTIVE="CURSOR_ACTIVE",e.CURSOR_INACTIVE="CURSOR_INACTIVE",e}({});const s="CursorOverlay_cursor__OSCiH";var a=o(6417);const i=new Event(r.CURSOR_ACTIVE),l=new Event(r.CURSOR_INACTIVE),c=e=>{e.stopPropagation(),window.dispatchEvent(i)},u=e=>{e.stopPropagation(),window.dispatchEvent(l)},d=()=>{const[e,t]=(0,n.useState)(!1);(0,n.useMemo)((()=>{window.addEventListener(r.CURSOR_ACTIVE,(()=>{t(!0)})),window.addEventListener(r.CURSOR_INACTIVE,(()=>{t(!1)}))}),[]);const o=e?"white":"transparent";return(0,a.jsx)("div",{className:s,style:{backgroundColor:o}})}},9363:(e,t,o)=>{let n;o.d(t,{n:()=>n}),function(e){let t=function(e){return e.playerJump="playerJump",e.playerMoveBackward="playerMoveBackward",e.playerMoveForward="playerMoveForward",e.playerMoveLeft="playerMoveLeft",e.playerMoveRight="playerMoveRight",e.playerRun="playerRun",e.pinballFlipperBoth="pinballFlipperBoth",e.pinballFlipperLeft="pinballFlipperLeft",e.pinballFlipperRight="pinballFlipperRight",e.pinballShoot="pinballShoot",e}({});const o="KeyA",n="KeyD",r="ArrowDown",s="KeyE",a="Enter",i="KeyF",l="KeyJ",c="ArrowLeft",u="KeyQ",d="ArrowRight",p="KeyS",m="Shift",h="Space",E="ArrowUp",v="KeyW",y="KeyZ",f=[{name:t.playerMoveBackward,keys:[r,n]},{name:t.playerMoveForward,keys:[E,s]},{name:t.playerMoveLeft,keys:[c,p]},{name:t.playerMoveRight,keys:[d,i]}],g=[{name:t.playerJump,keys:[h]},{name:t.playerRun,keys:[m]}],R=[{name:t.playerMoveBackward,keys:[r,p]},{name:t.playerMoveForward,keys:[E,v]},{name:t.playerMoveLeft,keys:[c,o]},{name:t.playerMoveRight,keys:[d,n]}],w=[{name:t.playerMoveBackward,keys:[r,p]},{name:t.playerMoveForward,keys:[E,y]},{name:t.playerMoveLeft,keys:[c,u]},{name:t.playerMoveRight,keys:[d,n]}];e.CONFIG_FIRST_PERSON_AZERTY=[...w,...g],e.CONFIG_FIRST_PERSON_UNIVERSAL=[...f,...g],e.CONFIG_FIRST_PERSON_QWERTY=[...R,...g],e.CONFIG_PINBALL_MACHINE=[{name:t.pinballFlipperBoth,keys:[h]},{name:t.pinballFlipperLeft,keys:[i]},{name:t.pinballFlipperRight,keys:[l]},{name:t.pinballShoot,keys:[a]}]}(n||(n={}))},4950:(e,t,o)=>{o.d(t,{o:()=>n});const n={BOX:{COUNT:10,MASS:0,SIZE:1},PLANE:{SIZE:10}}},5278:(e,t,o)=>{o.d(t,{r:()=>n});const n={DIRECTION:{BACKWARD:1,DOWN:-1,FORWARD:-1,LEFT:-1,NONE:0,RIGHT:1,UP:1},HEIGHT:1.75,MASS:75,POSITION:new(o(5825).Vector3)(0,2,2),SIZE:.5,VELOCITY:{DEFAULT:1,FORWARD:2,LATERAL:1,LONGITUDINAL:1,NONE:0,NORMAL:.5,RUN:3}}},3280:(e,t,o)=>{o.d(t,{p:()=>l});var n=o(4704),r=o(5397),s=o(9817);let a;var i;function l(){const{gravity:e,paused:t,showDebug:o}=(0,n.M4)(r.O.SCHEMA.PHYSICS,{gravity:a.gravity(),paused:a.paused(),showDebug:a.showDebug(!0)},s.F.folder(r.O.ORDER.PHYSICS));return{gravity:e,paused:t,showDebug:o}}(i=a||(a={})).gravity=function(){return{label:"Gravity",hint:"Default = 9.81",value:{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:-9.80665,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}}},i.paused=function(){return{label:"Paused",hint:"Pause physics simulation.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},i.showDebug=function(){return{label:"Debug",hint:"Show debug geometry.",value:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}},478:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F});var n=o(1777),r=o(1898),s=o(3658),a=o(13),i=o(2952),l=o(7313),c=o(5825),u=o(6417);const d=e=>{const t=[100,100],o=[c.MathUtils.degToRad(-90),0,0],[n]=(0,a.xK)((()=>({mass:0,rotation:o})),(0,l.useRef)(null));return(0,u.jsx)("group",{name:"Floor",...e,children:(0,u.jsx)(i.JO,{args:t,ref:n,children:(0,u.jsx)("meshBasicMaterial",{color:6710886,side:c.DoubleSide})})})};var p=o(4950);const m=new Array(p.o.BOX.COUNT).fill(null).map((()=>[Math.floor(Math.random()*p.o.PLANE.SIZE-p.o.PLANE.SIZE/2),p.o.BOX.SIZE/2,Math.floor(Math.random()*p.o.PLANE.SIZE-p.o.PLANE.SIZE/2)])),h=new Array(p.o.BOX.COUNT).fill(null).map(((e,t)=>({position:m[t]}))),E=e=>{let{position:t}=e;const o=[p.o.BOX.SIZE,p.o.BOX.SIZE,p.o.BOX.SIZE],[n]=(0,a.EJ)((()=>({args:o,mass:p.o.BOX.MASS,position:t})),(0,l.useRef)(null));return(0,u.jsx)(i.xu,{args:o,onPointerEnter:s.En,onPointerLeave:s.tK,onPointerOut:s.tK,onPointerOver:s.En,ref:n,children:(0,u.jsx)("meshBasicMaterial",{color:16777215*Math.random(),opacity:.75,transparent:!0})})},v=e=>(0,u.jsx)("group",{name:"Obstacles",...e,children:h.map(((e,t)=>{let{position:o}=e;return(0,u.jsx)(E,{position:o},t)}))});var y=o(9782),f=o(7298),g=o(4063),R=o(9080),w=o(5278);const I=new c.Vector3,S=I.clone(),L=I.clone(),k=e=>{const t=(0,y.Z)((e=>e.playerJump)),o=(0,y.Z)((e=>e.playerMoveBackward)),n=(0,y.Z)((e=>e.playerMoveForward)),r=(0,y.Z)((e=>e.playerMoveLeft)),s=(0,y.Z)((e=>e.playerMoveRight)),c=(0,y.Z)((e=>e.playerRun)),d=(0,l.useRef)(null),p=(0,l.useRef)(null),[m,h]=(0,l.useState)(!0),[E,v]=(0,l.useState)(!1),[k,O]=(0,a.Eo)((()=>({args:[w.r.SIZE],mass:w.r.MASS,position:w.r.POSITION.toArray()})),(0,l.useRef)(null)),A=(0,l.useRef)([0,0,0]),C=(0,l.useRef)(I);return(0,l.useEffect)((()=>{E&&(setTimeout((()=>h(!0)),1e3),setTimeout((()=>v(!1)),230))}),[E]),(0,l.useEffect)((()=>{O.velocity.subscribe((e=>A.current=e)),O.position.subscribe((e=>C.current=S.set(...e)))}),[O.velocity,O.position]),(0,R.C)((()=>{const e=d.current.getObject(),a=p.current,i=s?w.r.DIRECTION.RIGHT:r?w.r.DIRECTION.LEFT:w.r.DIRECTION.NONE,l=w.r.VELOCITY.LATERAL,u=n?w.r.DIRECTION.FORWARD:o?w.r.DIRECTION.BACKWARD:w.r.DIRECTION.NONE,y=n?w.r.VELOCITY.FORWARD:o?w.r.VELOCITY.DEFAULT:w.r.VELOCITY.NONE;m&&!E&&t&&(v(!0),h(!1));const f=t?w.r.DIRECTION.UP:w.r.DIRECTION.NONE,g=E&&t?w.r.VELOCITY.NORMAL:w.r.VELOCITY.NONE,R=c?w.r.VELOCITY.RUN:w.r.VELOCITY.DEFAULT;L.set(i*l*R,0,u*y*R),L.applyQuaternion(e.quaternion),L.y=A.current[1]+f*g,o||n||r||s||O.angularVelocity.copy(L),O.velocity.copy(L),e.position.copy(C.current),e.position.y+=w.r.HEIGHT-w.r.SIZE,a.position.copy(C.current),a.position.y=.001})),(0,u.jsxs)("group",{name:"Player",...e,children:[(0,u.jsx)(f.q,{ref:d}),(0,u.jsx)(i.aL,{args:[w.r.SIZE,8,8],ref:k,children:(0,u.jsx)("meshBasicMaterial",{color:65280,wireframe:!0,visible:!1})}),(0,u.jsx)(g.j,{color:"black",colorStop:0,fog:!1,opacity:.5,ref:p})]})},O=e=>{const t=c.MathUtils.degToRad(-55),o=[1,10,.2],n=[t,0,0],[r]=(0,a.EJ)((()=>({args:o,mass:0,rotation:n})),(0,l.useRef)(null));return(0,u.jsx)("group",{name:"Stairs",...e,children:(0,u.jsx)(i.xu,{args:o,ref:r,children:(0,u.jsx)("meshBasicMaterial",{color:10066329,opacity:.25,transparent:!0})})})},A=e=>(0,u.jsxs)("group",{name:"World",...e,children:[(0,u.jsx)(d,{}),(0,u.jsx)(v,{}),(0,u.jsx)(k,{}),(0,u.jsx)(n.$,{onPointerEnter:s.En,onPointerLeave:s.tK,position:[0,0,-5]}),(0,u.jsx)(r.$,{onPointerEnter:s.En,onPointerLeave:s.tK}),(0,u.jsx)(O,{})]});var C=o(7066),M=o(5819),x=o(4704),b=o(1724),N=o(7862),P=o(9363),T=o(4662),j=o(3280);const D=e=>{let{children:t}=e;const o=(0,T.p)(),n=(0,j.p)();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(M.Xz,{camera:void 0,flat:o.flat,frameloop:o.frameloop,linear:o.linear,orthographic:!1,shadows:o.shadows,children:(0,u.jsxs)(l.Suspense,{children:[(0,u.jsx)(b.Z,{}),(0,u.jsx)(N.u,{}),(0,u.jsx)(y.c,{map:P.n.CONFIG_FIRST_PERSON_UNIVERSAL,children:(0,u.jsx)(a.wI,{gravity:[n.gravity.x,n.gravity.y,n.gravity.z],isPaused:n.paused,children:n.showDebug?(0,u.jsx)(a.cG,{color:16711935,children:t}):t})})]})}),(0,u.jsx)(s.MU,{}),(0,u.jsx)(x.Zf,{collapsed:!1,fill:!1,flat:!1,hidden:!1,oneLineLabels:!0,titleBar:!0}),(0,u.jsx)(C.a,{})]})},F=e=>(0,u.jsx)(D,{children:(0,u.jsx)(A,{...e})})},7298:(e,t,o)=>{o.d(t,{q:()=>v});var n=o(7462),r=o(9080),s=o(7313),a=o(5825),i=Object.defineProperty,l=(e,t,o)=>(((e,t,o)=>{t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o})(e,"symbol"!==typeof t?t+"":t,o),o);const c=new a.Euler(0,0,0,"YXZ"),u=new a.Vector3,d={type:"change"},p={type:"lock"},m={type:"unlock"},h=Math.PI/2;class E extends a.EventDispatcher{constructor(e,t){super(),l(this,"camera"),l(this,"domElement"),l(this,"isLocked"),l(this,"minPolarAngle"),l(this,"maxPolarAngle"),l(this,"pointerSpeed"),l(this,"onMouseMove",(e=>{if(!this.domElement||!1===this.isLocked)return;const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,o=e.movementY||e.mozMovementY||e.webkitMovementY||0;c.setFromQuaternion(this.camera.quaternion),c.y-=.002*t*this.pointerSpeed,c.x-=.002*o*this.pointerSpeed,c.x=Math.max(h-this.maxPolarAngle,Math.min(h-this.minPolarAngle,c.x)),this.camera.quaternion.setFromEuler(c),this.dispatchEvent(d)})),l(this,"onPointerlockChange",(()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(p),this.isLocked=!0):(this.dispatchEvent(m),this.isLocked=!1))})),l(this,"onPointerlockError",(()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")})),l(this,"connect",(e=>{this.domElement=e||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))})),l(this,"disconnect",(()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))})),l(this,"dispose",(()=>{this.disconnect()})),l(this,"getObject",(()=>this.camera)),l(this,"direction",new a.Vector3(0,0,-1)),l(this,"getDirection",(e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion))),l(this,"moveForward",(e=>{u.setFromMatrixColumn(this.camera.matrix,0),u.crossVectors(this.camera.up,u),this.camera.position.addScaledVector(u,e)})),l(this,"moveRight",(e=>{u.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(u,e)})),l(this,"lock",(()=>{this.domElement&&this.domElement.requestPointerLock()})),l(this,"unlock",(()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()})),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}}const v=s.forwardRef(((e,t)=>{let{domElement:o,selector:a,onChange:i,onLock:l,onUnlock:c,enabled:u=!0,makeDefault:d,...p}=e;const{camera:m,...h}=p,v=(0,r.A)((e=>e.setEvents)),y=(0,r.A)((e=>e.gl)),f=(0,r.A)((e=>e.camera)),g=(0,r.A)((e=>e.invalidate)),R=(0,r.A)((e=>e.events)),w=(0,r.A)((e=>e.get)),I=(0,r.A)((e=>e.set)),S=m||f,L=o||R.connected||y.domElement,k=s.useMemo((()=>new E(S)),[S]);return s.useEffect((()=>{if(u){k.connect(L);const e=w().events.compute;return v({compute(e,t){const o=t.size.width/2,n=t.size.height/2;t.pointer.set(o/t.size.width*2-1,-n/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{k.disconnect(),v({compute:e})}}}),[u,k]),s.useEffect((()=>{const e=e=>{g(),i&&i(e)};k.addEventListener("change",e),l&&k.addEventListener("lock",l),c&&k.addEventListener("unlock",c);const t=()=>k.lock(),o=a?Array.from(document.querySelectorAll(a)):[document];return o.forEach((e=>e&&e.addEventListener("click",t))),()=>{k.removeEventListener("change",e),l&&k.removeEventListener("lock",l),c&&k.removeEventListener("unlock",c),o.forEach((e=>e?e.removeEventListener("click",t):void 0))}}),[i,l,c,a,k,g]),s.useEffect((()=>{if(d){const e=w().controls;return I({controls:k}),()=>I({controls:e})}}),[d,k]),s.createElement("primitive",(0,n.Z)({ref:t,object:k},h))}))},6866:(e,t,o)=>{o.d(t,{V:()=>l});var n=o(7462),r=o(7313),s=o(5825),a=o(9080),i=o(4296);const l=r.forwardRef(((e,t)=>{let{url:o,distance:l=1,loop:c=!0,autoplay:u,...d}=e;const p=r.useRef(),m=(0,a.A)((e=>{let{camera:t}=e;return t})),[h]=r.useState((()=>new s.AudioListener)),E=(0,a.F)(s.AudioLoader,o);return r.useEffect((()=>{const e=p.current;e&&(e.setBuffer(E),e.setRefDistance(l),e.setLoop(c),u&&!e.isPlaying&&e.play())}),[E,m,l,c]),r.useEffect((()=>{const e=p.current;return m.add(h),()=>{m.remove(h),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}}),[]),r.createElement("positionalAudio",(0,n.Z)({ref:(0,i.Z)([p,t]),args:[h]},d))}))},4063:(e,t,o)=>{o.d(t,{j:()=>a});var n=o(7462),r=o(7313),s=o(5825);const a=r.forwardRef(((e,t)=>{let{fog:o=!1,renderOrder:a,depthWrite:i=!1,colorStop:l=0,color:c="black",opacity:u=.5,...d}=e;const p=r.useMemo((()=>{const e=document.createElement("canvas");e.width=128,e.height=128;const t=e.getContext("2d"),o=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return o.addColorStop(l,new s.Color(c).getStyle()),o.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=o,t.fillRect(0,0,e.width,e.height),e}),[c,l]);return r.createElement("mesh",(0,n.Z)({renderOrder:a,ref:t,"rotation-x":-Math.PI/2},d),r.createElement("planeGeometry",null),r.createElement("meshBasicMaterial",{transparent:!0,opacity:u,fog:o,depthWrite:i,side:s.DoubleSide},r.createElement("canvasTexture",{attach:"map",args:[p]})))}))},9782:(e,t,o)=>{o.d(t,{Z:()=>l,c:()=>i});var n=o(7313),r=o(176),s=o(9009);const a=n.createContext(null);function i(e){let{map:t,children:o,onChange:i,domElement:l}=e;const c=t.map((e=>e.name+e.keys)).join("-"),u=n.useMemo((()=>(0,r.Z)((0,s.XR)((()=>t.reduce(((e,t)=>({...e,[t.name]:!1})),{}))))),[c]),d=n.useMemo((()=>[u.subscribe,u.getState,u]),[c]),p=u.setState;return n.useEffect((()=>{const e=t.map((e=>{let{name:t,keys:o,up:n}=e;return{keys:o,up:n,fn:e=>{p({[t]:e}),i&&i(t,e,d[1]())}}})).reduce(((e,t)=>{let{keys:o,fn:n,up:r=!0}=t;return o.forEach((t=>e[t]={fn:n,pressed:!1,up:r})),e}),{}),o=t=>{let{key:o,code:n}=t;const r=e[o]||e[n];if(!r)return;const{fn:s,pressed:a,up:i}=r;r.pressed=!0,!i&&a||s(!0)},n=t=>{let{key:o,code:n}=t;const r=e[o]||e[n];if(!r)return;const{fn:s,up:a}=r;r.pressed=!1,a&&s(!1)},r=l||window;return r.addEventListener("keydown",o,{passive:!0}),r.addEventListener("keyup",n,{passive:!0}),()=>{r.removeEventListener("keydown",o),r.removeEventListener("keyup",n)}}),[l,c]),n.createElement(a.Provider,{value:d,children:o})}function l(e){const[t,o,r]=n.useContext(a);return e?r(e):[t,o]}}}]);