"use strict";(self.webpackChunkx_reality=self.webpackChunkx_reality||[]).push([[8265],{2738:(e,t,n)=>{n.d(t,{q:()=>v});var o=n(7462),r=n(3002),i=n(7313),a=n(5825),s=Object.defineProperty,c=(e,t,n)=>(((e,t,n)=>{t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const l=new a.Euler(0,0,0,"YXZ"),u=new a.Vector3,m={type:"change"},d={type:"lock"},h={type:"unlock"},p=Math.PI/2;class f extends a.EventDispatcher{constructor(e,t){super(),c(this,"camera"),c(this,"domElement"),c(this,"isLocked"),c(this,"minPolarAngle"),c(this,"maxPolarAngle"),c(this,"pointerSpeed"),c(this,"onMouseMove",(e=>{if(!this.domElement||!1===this.isLocked)return;const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;l.setFromQuaternion(this.camera.quaternion),l.y-=.002*t*this.pointerSpeed,l.x-=.002*n*this.pointerSpeed,l.x=Math.max(p-this.maxPolarAngle,Math.min(p-this.minPolarAngle,l.x)),this.camera.quaternion.setFromEuler(l),this.dispatchEvent(m)})),c(this,"onPointerlockChange",(()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(d),this.isLocked=!0):(this.dispatchEvent(h),this.isLocked=!1))})),c(this,"onPointerlockError",(()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")})),c(this,"connect",(e=>{this.domElement=e||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))})),c(this,"disconnect",(()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))})),c(this,"dispose",(()=>{this.disconnect()})),c(this,"getObject",(()=>this.camera)),c(this,"direction",new a.Vector3(0,0,-1)),c(this,"getDirection",(e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion))),c(this,"moveForward",(e=>{u.setFromMatrixColumn(this.camera.matrix,0),u.crossVectors(this.camera.up,u),this.camera.position.addScaledVector(u,e)})),c(this,"moveRight",(e=>{u.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(u,e)})),c(this,"lock",(()=>{this.domElement&&this.domElement.requestPointerLock()})),c(this,"unlock",(()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()})),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}}const v=i.forwardRef(((e,t)=>{let{domElement:n,selector:a,onChange:s,onLock:c,onUnlock:l,enabled:u=!0,makeDefault:m,...d}=e;const{camera:h,...p}=d,v=(0,r.A)((e=>e.setEvents)),g=(0,r.A)((e=>e.gl)),E=(0,r.A)((e=>e.camera)),y=(0,r.A)((e=>e.invalidate)),w=(0,r.A)((e=>e.events)),k=(0,r.A)((e=>e.get)),P=(0,r.A)((e=>e.set)),x=h||E,L=n||w.connected||g.domElement,b=i.useMemo((()=>new f(x)),[x]);return i.useEffect((()=>{if(u){b.connect(L);const e=k().events.compute;return v({compute(e,t){const n=t.size.width/2,o=t.size.height/2;t.pointer.set(n/t.size.width*2-1,-o/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{b.disconnect(),v({compute:e})}}}),[u,b]),i.useEffect((()=>{const e=e=>{y(),s&&s(e)};b.addEventListener("change",e),c&&b.addEventListener("lock",c),l&&b.addEventListener("unlock",l);const t=()=>b.lock(),n=a?Array.from(document.querySelectorAll(a)):[document];return n.forEach((e=>e&&e.addEventListener("click",t))),()=>{b.removeEventListener("change",e),c&&b.removeEventListener("lock",c),l&&b.removeEventListener("unlock",l),n.forEach((e=>e?e.removeEventListener("click",t):void 0))}}),[s,c,l,a,b,y]),i.useEffect((()=>{if(m){const e=k().controls;return P({controls:b}),()=>P({controls:e})}}),[m,b]),i.createElement("primitive",(0,o.Z)({ref:t,object:b},p))}))},6866:(e,t,n)=>{n.d(t,{V:()=>c});var o=n(7462),r=n(7313),i=n(5825),a=n(3002),s=n(4296);const c=r.forwardRef(((e,t)=>{let{url:n,distance:c=1,loop:l=!0,autoplay:u,...m}=e;const d=r.useRef(),h=(0,a.A)((e=>{let{camera:t}=e;return t})),[p]=r.useState((()=>new i.AudioListener)),f=(0,a.F)(i.AudioLoader,n);return r.useEffect((()=>{const e=d.current;e&&(e.setBuffer(f),e.setRefDistance(c),e.setLoop(l),u&&!e.isPlaying&&e.play())}),[f,h,c,l]),r.useEffect((()=>{const e=d.current;return h.add(p),()=>{h.remove(p),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}}),[]),r.createElement("positionalAudio",(0,o.Z)({ref:(0,s.Z)([d,t]),args:[p]},m))}))},4063:(e,t,n)=>{n.d(t,{j:()=>a});var o=n(7462),r=n(7313),i=n(5825);const a=r.forwardRef(((e,t)=>{let{fog:n=!1,renderOrder:a,depthWrite:s=!1,colorStop:c=0,color:l="black",opacity:u=.5,...m}=e;const d=r.useMemo((()=>{const e=document.createElement("canvas");e.width=128,e.height=128;const t=e.getContext("2d"),n=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return n.addColorStop(c,new i.Color(l).getStyle()),n.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}),[l,c]);return r.createElement("mesh",(0,o.Z)({renderOrder:a,ref:t,"rotation-x":-Math.PI/2},m),r.createElement("planeGeometry",null),r.createElement("meshBasicMaterial",{transparent:!0,opacity:u,fog:n,depthWrite:s,side:i.DoubleSide},r.createElement("canvasTexture",{attach:"map",args:[d]})))}))},3081:(e,t,n)=>{n.d(t,{P:()=>m});var o=n(7462),r=n(7313),i=n(5825),a=n(3002),s=n(4296),c=n(2362);class l extends i.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new i.Vector3(0,0,0)},lightColor:{value:new i.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new i.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:"\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n        uniform vec3 spotPosition;\n        uniform float attenuation;\n\n        #include <common>\n        #include <logdepthbuf_pars_vertex>\n\n        void main() {\n          // compute intensity\n          vNormal = normalize(normalMatrix * normal);\n          vec4 worldPosition = modelMatrix * vec4(position, 1);\n          vec4 viewPosition = viewMatrix * worldPosition;\n          vViewZ = viewPosition.z;\n\n          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);\n\n          gl_Position = projectionMatrix * viewPosition;\n\n          #include <logdepthbuf_vertex>\n        }\n      ",fragmentShader:"\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n\n        uniform vec3 lightColor;\n        uniform float anglePower;\n        uniform sampler2D depth;\n        uniform vec2 resolution;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float opacity;\n\n        #include <packing>\n        #include <logdepthbuf_pars_fragment>\n\n        float readDepth(sampler2D depthSampler, vec2 uv) {\n          float fragCoordZ = texture(depthSampler, uv).r;\n\n          // https://github.com/mrdoob/three.js/issues/23072\n          #ifdef USE_LOGDEPTHBUF\n            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));\n          #else\n            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\n          #endif\n\n          return viewZ;\n        }\n\n        void main() {\n          #include <logdepthbuf_fragment>\n\n          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);\n          float intensity = vIntensity * angleIntensity;\n\n          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry\n          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;\n          if (isSoft) {\n            vec2 uv = gl_FragCoord.xy / resolution;\n            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));\n          }\n\n          gl_FragColor = vec4(lightColor, intensity * opacity);\n\n          #include <tonemapping_fragment>\n          #include <".concat(c.i>=154?"colorspace_fragment":"encodings_fragment",">\n        }\n      ")})}}function u(e){let{opacity:t=1,radiusTop:n,radiusBottom:o,depthBuffer:s,color:c="white",distance:u=5,angle:m=.15,attenuation:d=5,anglePower:h=5}=e;const p=r.useRef(null),f=(0,a.A)((e=>e.size)),v=(0,a.A)((e=>e.camera)),g=(0,a.A)((e=>e.viewport.dpr)),[E]=r.useState((()=>new l)),[y]=r.useState((()=>new i.Vector3));n=void 0===n?.1:n,o=void 0===o?7*m:o,(0,a.C)((()=>{E.uniforms.spotPosition.value.copy(p.current.getWorldPosition(y)),p.current.lookAt(p.current.parent.target.getWorldPosition(y))}));const w=r.useMemo((()=>{const e=new i.CylinderGeometry(n,o,u,128,64,!0);return e.applyMatrix4((new i.Matrix4).makeTranslation(0,-u/2,0)),e.applyMatrix4((new i.Matrix4).makeRotationX(-Math.PI/2)),e}),[u,n,o]);return r.createElement(r.Fragment,null,r.createElement("mesh",{ref:p,geometry:w,raycast:()=>null},r.createElement("primitive",{object:E,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":c,"uniforms-attenuation-value":d,"uniforms-anglePower-value":h,"uniforms-depth-value":s,"uniforms-cameraNear-value":v.near,"uniforms-cameraFar-value":v.far,"uniforms-resolution-value":s?[f.width*g,f.height*g]:[0,0]})))}const m=r.forwardRef(((e,t)=>{let{opacity:n=1,radiusTop:i,radiusBottom:a,depthBuffer:c,color:l="white",distance:m=5,angle:d=.15,attenuation:h=5,anglePower:p=5,volumetric:f=!0,debug:v=!1,children:g,...E}=e;const y=r.useRef(null);return r.createElement("group",null,v&&y.current&&r.createElement("spotLightHelper",{args:[y.current]}),r.createElement("spotLight",(0,o.Z)({ref:(0,s.Z)([t,y]),angle:d,color:l,distance:m,castShadow:!0},E),f&&r.createElement(u,{debug:v,opacity:n,radiusTop:i,radiusBottom:a,depthBuffer:c,color:l,distance:m,angle:d,attenuation:h,anglePower:p})),g&&r.cloneElement(g,{spotlightRef:y,debug:v}))}))},126:(e,t,n)=>{n.d(t,{x:()=>s});var o=n(7462),r=n(7313),i=n(3002),a=n(1120);const s=r.forwardRef(((e,t)=>{let{sdfGlyphSize:s=64,anchorX:c="center",anchorY:l="middle",font:u,fontSize:m=1,children:d,characters:h,onSync:p,...f}=e;const{Text:v,preloadFont:g}=(0,a.Rq)((async()=>n.e(109).then(n.bind(n,109))),[]),E=(0,i.A)((e=>{let{invalidate:t}=e;return t})),[y]=r.useState((()=>new v)),[w,k]=r.useMemo((()=>{const e=[];let t="";return r.Children.forEach(d,(n=>{"string"===typeof n||"number"===typeof n?t+=n:e.push(n)})),[e,t]}),[d]);return(0,a.Rq)((()=>new Promise((e=>g({font:u,characters:h},e)))),["troika-text",u,h]),r.useLayoutEffect((()=>{y.sync((()=>{E(),p&&p(y)}))})),r.useEffect((()=>()=>y.dispose()),[y]),r.createElement("primitive",(0,o.Z)({object:y,ref:t,font:u,text:k,anchorX:c,anchorY:l,fontSize:m,sdfGlyphSize:s},f),w)}))},2952:(e,t,n)=>{n.d(t,{Ab:()=>l,Cd:()=>s,FC:()=>v,FM:()=>f,JO:()=>m,KC:()=>d,N1:()=>E,Qq:()=>c,aL:()=>u,fg:()=>h,vO:()=>p,xu:()=>a,yI:()=>g});var o=n(7462),r=n(7313);function i(e,t){const n=e+"Geometry";return r.forwardRef(((e,i)=>{let{args:a,children:s,...c}=e;const l=r.useRef(null);return r.useImperativeHandle(i,(()=>l.current)),r.useLayoutEffect((()=>{null==t||t(l.current)})),r.createElement("mesh",(0,o.Z)({ref:l},c),r.createElement(n,{attach:"geometry",args:a}),s)}))}const a=i("box"),s=i("circle"),c=i("cone"),l=i("cylinder"),u=i("sphere"),m=i("plane"),d=i("torus"),h=i("torusKnot"),p=i("tetrahedron"),f=i("ring"),v=i("icosahedron"),g=i("octahedron"),E=i("dodecahedron")},5964:(e,t,n)=>{n.d(t,{H:()=>i});var o=n(7313),r=n(3002);function i(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];const s=o.useRef(),c=(0,r.A)((e=>e.scene));return o.useLayoutEffect((()=>{let n;if(e&&null!=e&&e.current&&t&&(s.current=n=new t(e.current,...i)),n)return n.traverse((e=>e.raycast=()=>null)),c.add(n),()=>{s.current=void 0,c.remove(n),null==n.dispose||n.dispose()}}),[c,t,e,...i]),(0,r.C)((()=>{var e;null==(e=s.current)||null==e.update||e.update()})),s}},2362:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(5825);const r=(()=>parseInt(o.REVISION.replace(/\D+/g,"")))()},9782:(e,t,n)=>{n.d(t,{Z:()=>c,c:()=>s});var o=n(7313),r=n(176),i=n(9009);const a=o.createContext(null);function s(e){let{map:t,children:n,onChange:s,domElement:c}=e;const l=t.map((e=>e.name+e.keys)).join("-"),u=o.useMemo((()=>(0,r.Z)((0,i.XR)((()=>t.reduce(((e,t)=>({...e,[t.name]:!1})),{}))))),[l]),m=o.useMemo((()=>[u.subscribe,u.getState,u]),[l]),d=u.setState;return o.useEffect((()=>{const e=t.map((e=>{let{name:t,keys:n,up:o}=e;return{keys:n,up:o,fn:e=>{d({[t]:e}),s&&s(t,e,m[1]())}}})).reduce(((e,t)=>{let{keys:n,fn:o,up:r=!0}=t;return n.forEach((t=>e[t]={fn:o,pressed:!1,up:r})),e}),{}),n=t=>{let{key:n,code:o}=t;const r=e[n]||e[o];if(!r)return;const{fn:i,pressed:a,up:s}=r;r.pressed=!0,!s&&a||i(!0)},o=t=>{let{key:n,code:o}=t;const r=e[n]||e[o];if(!r)return;const{fn:i,up:a}=r;r.pressed=!1,a&&i(!1)},r=c||window;return r.addEventListener("keydown",n,{passive:!0}),r.addEventListener("keyup",o,{passive:!0}),()=>{r.removeEventListener("keydown",n),r.removeEventListener("keyup",o)}}),[c,l]),o.createElement(a.Provider,{value:m,children:n})}function c(e){const[t,n,r]=o.useContext(a);return e?r(e):[t,n]}}}]);